diff -x Makefile.in -x Makefile -urN xserver-20041103-1/autogen-rs.sh xserver-ptx/autogen-rs.sh
--- xserver-20041103-1/autogen-rs.sh	1970-01-01 01:00:00.000000000 +0100
+++ xserver-ptx/autogen-rs.sh	2004-10-09 22:32:16.000000000 +0200
@@ -0,0 +1,7 @@
+#!/bin/sh
+
+aclocal-1.7 -I /usr/share/aclocal/
+libtoolize -c --force
+autoheader
+autoconf
+automake-1.7 --add-missing -c
diff -x Makefile.in -x Makefile -urN xserver-20041103-1/configure.ac xserver-ptx/configure.ac
--- xserver-20041103-1/configure.ac	2004-11-04 07:31:00.000000000 +0100
+++ xserver-ptx/configure.ac	2004-10-27 17:22:56.000000000 +0200
@@ -104,7 +104,7 @@
 AC_ARG_ENABLE(screensaver,   [  --disable-screensaver ],
 			     [SCREENSAVER=$enableval],
 			     [SCREENSAVER=yes])
-AC_ARG_ENABLE(xdmcp,         [  --disable-xdmcp ],[XDMCP=$enableval],[XDMCP=auto])
+AC_ARG_ENABLE(xdmcp,         [  --disable-xdmcp ],[XDMCP=$enableval],[XDMCP=yes])
 AC_ARG_ENABLE(xdm-auth-1,    [  --disable-xdm-auth-1 ],[XDMAUTH=$enableval],[XDMAUTH=auto])
 AC_ARG_ENABLE(glx,           [  --enable-glx ],[GLX=$enableval],[GLX=no])
 AC_ARG_ENABLE(dri,           [  --enable-dri ],[DRI=$enableval],[DRI=no])
@@ -251,29 +251,29 @@
 	AC_DEFINE(XLOADABLE,1,[Support loadable input and output drivers])
 fi
 
-PKG_CHECK_MODULES(XDMCP, xdmcp, [have_libxdmcp="yes"], [have_libxdmcp="no"])
+AM_CONDITIONAL(XDMCP, [test x$XDMCP = xyes])
+if test "$XDMCP" = yes; then 
+	PKG_CHECK_MODULES(XDMCP, xdmcp, [have_libxdmcp="yes"], [have_libxdmcp="no"])
 
-if test "$have_libxdmcp" = yes; then
-	AC_CHECK_LIB(Xdmcp, XdmcpWrap, [have_xdmcpwrap="yes"], [have_xdmcpwrap="no"], [$XDMCP_LIBS])
-fi
+	if test "$have_libxdmcp" = yes; then
+		AC_CHECK_LIB(Xdmcp, XdmcpWrap, [have_xdmcpwrap="yes"], [have_xdmcpwrap="no"], [$XDMCP_LIBS])
+	fi
 
-if test x$XDMCP = xauto; then
-	if test $have_libxdmcp = yes; then
-		XDMCP=yes
-	else
-		XDMCP=no
+	if test x$XDMCP = xauto; then
+		if test $have_libxdmcp = yes; then
+			XDMCP=yes
+		else
+			XDMCP=no
+		fi
 	fi
-fi
-if test x$XDMAUTH = xauto; then
-	if test $have_libxdmcp = yes -a x$have_xdmcpwrap = xyes; then
-		XDMAUTH=yes
-	else
-		XDMAUTH=no
+	if test x$XDMAUTH = xauto; then
+		if test $have_libxdmcp = yes -a x$have_xdmcpwrap = xyes; then
+			XDMAUTH=yes
+		else
+			XDMAUTH=no
+		fi
 	fi
-fi
 
-AM_CONDITIONAL(XDMCP, [test x$XDMCP = xyes])
-if test "$XDMCP" = yes; then
 	AC_DEFINE(XDMCP,1,[Support Xdmcp])
 	REQUIRED_MODULES="$REQUIRED_MODULES xdmcp"
 fi
diff -x Makefile.in -x Makefile -urN xserver-20041103-1/hw/kdrive/i810/i810_video.c xserver-ptx/hw/kdrive/i810/i810_video.c
--- xserver-20041103-1/hw/kdrive/i810/i810_video.c	2004-07-15 11:56:39.000000000 +0200
+++ xserver-ptx/hw/kdrive/i810/i810_video.c	2004-11-01 16:58:21.000000000 +0100
@@ -71,6 +71,10 @@
 #ifdef HAVE_CONFIG_H
 #include <config.h>
 #endif
+
+// RSC: FIXME
+#ifdef XV
+
 #include "kdrive.h"
 #include "kxv.h"
 #include "i810.h"
@@ -1134,3 +1138,5 @@
         }
     }
 }
+
+#endif // RSC
diff -x Makefile.in -x Makefile -urN xserver-20041103-1/os/osdep.h xserver-ptx/os/osdep.h
--- xserver-20041103-1/os/osdep.h	2003-11-02 21:10:26.000000000 +0100
+++ xserver-ptx/os/osdep.h	2004-11-01 16:40:16.000000000 +0100
@@ -57,7 +57,9 @@
 #define MAXBUFSIZE (1 << 22)
 #endif
 
+#ifdef XDMCP
 #include <X11/Xdmcp.h>
+#endif
 
 #ifndef sgi	    /* SGI defines OPEN_MAX in a useless way */
 #ifndef X_NOT_POSIX
@@ -121,9 +123,11 @@
 
 #include <stddef.h>
 
+#ifdef XDMCP
 typedef Bool (*ValidatorFunc)(ARRAY8Ptr Auth, ARRAY8Ptr Data, int packet_type);
 typedef Bool (*GeneratorFunc)(ARRAY8Ptr Auth, ARRAY8Ptr Data, int packet_type);
 typedef Bool (*AddAuthorFunc)(unsigned name_length, char *name, unsigned data_length, char *data);
+#endif
 
 typedef struct _connectionInput {
     struct _connectionInput *next;
@@ -311,6 +315,7 @@
 extern XID AuthSecurityCheck (AuthCheckArgs);
 
 /* in xdmcp.c */
+#ifdef XDMCP
 extern void XdmcpUseMsg (void);
 extern int XdmcpOptions(int argc, char **argv, int i);
 extern void XdmcpSetAuthentication (ARRAY8Ptr name);
@@ -338,5 +343,6 @@
 
 struct sockaddr_in;
 extern void XdmcpRegisterBroadcastAddress (struct sockaddr_in *addr);
+#endif
 
 #endif /* _OSDEP_H_ */
diff -x Makefile.in -x Makefile -urN xserver-20041103-1/os/xdmauth.c xserver-ptx/os/xdmauth.c
--- xserver-20041103-1/os/xdmauth.c	2003-11-02 21:10:26.000000000 +0100
+++ xserver-ptx/os/xdmauth.c	2004-11-01 16:42:18.000000000 +0100
@@ -44,7 +44,9 @@
 #include "os.h"
 #include "osdep.h"
 #include "dixstruct.h"
+#ifdef XDMCP
 #include <X11/Xdmcp.h>
+#endif
 
 #ifdef HASXDMAUTH
 
