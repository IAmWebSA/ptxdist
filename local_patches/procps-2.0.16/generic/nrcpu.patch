--- procps-2.0.16/top.c.orig	2003-09-22 11:26:47.000000000 -0700
+++ procps-2.0.16/top.c	2003-09-22 11:27:20.000000000 -0700
@@ -252,6 +252,8 @@
 	int i;
 
 	nr_cpu = sysconf(_SC_NPROCESSORS_ONLN);
+	if (nr_cpu < 1)
+		nr_cpu = 1;
 	cpu_mapping = (int *) xmalloc(sizeof(int) * nr_cpu);
 	/* read cpuname */
 	for (i = 0; i < nr_cpu; i++)
