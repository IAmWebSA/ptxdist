#
# Submitted-By: Marc Kleine-Budde, 2006-02-28
# Committed-By: Marc Kleine-Budde
#
# Error:
#
# freetype-config is not $SYSROOT aware
#
# Description: 
#
# this patch adds $SYSROOT support to freetype-config
#
# State:
# 
# not commited, but should be :)
#
Index: freetype-2.2.1/builds/unix/freetype-config.in
===================================================================
--- freetype-2.2.1.orig/builds/unix/freetype-config.in
+++ freetype-2.2.1/builds/unix/freetype-config.in
@@ -76,13 +76,13 @@ while test $# -gt 0 ; do
     exit 0
     ;;
   --ftversion)
-    major=`grep define @prefix@/include/freetype2/freetype/freetype.h \
+    major=`grep define ${SYSROOT}@prefix@/include/freetype2/freetype/freetype.h \
            | grep FREETYPE_MAJOR \
            | sed 's/.*[ 	]\([0-9][0-9]*\).*/\1/'`
-    minor=`grep define @prefix@/include/freetype2/freetype/freetype.h \
+    minor=`grep define ${SYSROOT}@prefix@/include/freetype2/freetype/freetype.h \
            | grep FREETYPE_MINOR \
            | sed 's/.*[ 	]\([0-9][0-9]*\).*/\1/'`
-    patch=`grep define @prefix@/include/freetype2/freetype/freetype.h \
+    patch=`grep define ${SYSROOT}@prefix@/include/freetype2/freetype/freetype.h \
            | grep FREETYPE_PATCH \
            | sed 's/.*[ 	]\([0-9][0-9]*\).*/\1/'`
     echo $major.$minor.$patch
@@ -111,11 +111,11 @@ if test "$local_prefix" = "yes" ; then
 fi
 
 if test "$echo_prefix" = "yes" ; then
-  echo $prefix
+  echo ${SYSROOT}$prefix
 fi
 
 if test "$echo_exec_prefix" = "yes" ; then
-  echo $exec_prefix
+  echo ${SYSROOT}$exec_prefix
 fi
 
 if test "$exec_prefix_set" = "yes" ; then
@@ -128,9 +128,9 @@ else
 fi
 
 if test "$echo_cflags" = "yes" ; then
-  cflags="-I$includedir/freetype2"
-  if test "$includedir" != "/usr/include" ; then
-    echo $cflags -I$includedir
+  cflags="-I${SYSROOT}$includedir/freetype2"
+  if test "${SYSROOT}$includedir" != "/usr/include" ; then
+    echo $cflags -I${SYSROOT}$includedir
   else
     echo $cflags
   fi
@@ -141,9 +141,9 @@ if test "$echo_libs" = "yes" ; then
   if test "$enable_shared" = "yes" ; then
     eval "rpath=\"$hardcode_libdir_flag_spec\""
   fi
-  libs="-lfreetype @LIBZ@"
-  if test "$libdir" != "/usr/lib" && test "$libdir" != "/usr/lib64"; then
-    echo -L$libdir $rpath $libs
+  libs="-Wl,-lfreetype @LIBZ@"
+  if test "${SYSROOT}$libdir" != "/usr/lib" && test "${SYSROOT}$libdir" != "/usr/lib64"; then
+    echo -L${SYSROOT}$libdir $rpath $libs
   else
     echo $libs
   fi
@@ -151,7 +151,7 @@ fi
 
 if test "$echo_libtool" = "yes" ; then
   convlib="libfreetype.la"
-  echo $libdir/$convlib
+  echo ${SYSROOT}$libdir/$convlib
 fi
 
 # EOF
