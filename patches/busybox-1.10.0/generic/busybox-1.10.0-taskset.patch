Subject: busybox 1.10.0 fixes
From: http://busybox.net/downloads/fixes-1.10.0

---
 miscutils/taskset.c     |    5 +++++
 testsuite/taskset.tests |    4 ++--
 2 files changed, 7 insertions(+), 2 deletions(-)

Index: busybox-1.10.0/miscutils/taskset.c
===================================================================
--- busybox-1.10.0.orig/miscutils/taskset.c
+++ busybox-1.10.0/miscutils/taskset.c
@@ -50,6 +50,11 @@ int taskset_main(int argc ATTRIBUTE_UNUS
 	char *pid_str;
 	char *aff = aff; /* for compiler */
 
+	/* NB: we mimic util-linux's taskset: -p does not take
+	 * an argument, i.e., "-pN" is NOT valid, only "-p N"!
+	 * Indeed, util-linux-2.13-pre7 uses:
+	 * getopt_long(argc, argv, "+pchV", ...), not "...p:..." */
+
 	opt_complementary = "-1"; /* at least 1 arg */
 	opt_p = getopt32(argv, "+p");
 	argv += optind;
Index: busybox-1.10.0/testsuite/taskset.tests
===================================================================
--- busybox-1.10.0.orig/testsuite/taskset.tests
+++ busybox-1.10.0/testsuite/taskset.tests
@@ -7,8 +7,8 @@
 a="taskset"
 
 # testing "test name"              "opts" "expected result" "file inp" "stdin"
-testing "taskset (get from pid 1)" "$a -p1 >/dev/null;echo \$?" "0\n" "" ""
-testing "taskset (invalid pid)"    "$a -p0 >/dev/null 2>&1;echo \$?" "1\n" "" ""
+testing "taskset (get from pid 1)" "$a -p 1 >/dev/null;echo \$?" "0\n" "" ""
+testing "taskset (invalid pid)"    "$a -p 0 >/dev/null 2>&1;echo \$?" "1\n" "" ""
 testing "taskset (set_aff, needs CAP_SYS_NICE)" \
                                    "$a 0x1 $SHELL -c $a\ -p\ \$$\|grep\ \"current\ affinity\ mask:\ 1\" >/dev/null;echo \$?" \
 				                                "0\n" "" ""
