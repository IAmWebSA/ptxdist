diff -u xf86-video-ati-X11R7.1-6.6.0.orig/configure xf86-video-ati-X11R7.1-6.6.0/configure
--- xf86-video-ati-X11R7.1-6.6.0.orig/configure	2006-05-23 05:30:57.000000000 +0200
+++ xf86-video-ati-X11R7.1-6.6.0/configure	2006-06-11 00:28:53.000000000 +0200
@@ -465,7 +465,7 @@
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT build build_cpu build_vendor build_os host host_cpu host_vendor host_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB CPP CXX CXXFLAGS ac_ct_CXX CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE CXXCPP F77 FFLAGS ac_ct_F77 LIBTOOL PKG_CONFIG ac_pt_PKG_CONFIG XORG_CFLAGS XORG_LIBS DRI_TRUE DRI_FALSE DRI_CFLAGS DRI_LIBS ATIMISC_CPIO_TRUE ATIMISC_CPIO_FALSE ATIMISC_NON_PCI_TRUE ATIMISC_NON_PCI_FALSE ATIMISC_DGA_TRUE ATIMISC_DGA_FALSE ATIMISC_TV_OUT_TRUE ATIMISC_TV_OUT_FALSE USE_EXA_TRUE USE_EXA_FALSE moduledir DRIVER_NAME APP_MAN_SUFFIX LIB_MAN_SUFFIX FILE_MAN_SUFFIX MISC_MAN_SUFFIX DRIVER_MAN_SUFFIX ADMIN_MAN_SUFFIX APP_MAN_DIR LIB_MAN_DIR FILE_MAN_DIR MISC_MAN_DIR DRIVER_MAN_DIR ADMIN_MAN_DIR LINUXDOC PS2PDF BUILD_LINUXDOC_TRUE BUILD_LINUXDOC_FALSE BUILD_PDFDOC_TRUE BUILD_PDFDOC_FALSE MAKE_TEXT MAKE_PS MAKE_PDF MAKE_HTML LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT build build_cpu build_vendor build_os host host_cpu host_vendor host_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE EGREP LN_S ECHO AR ac_ct_AR RANLIB ac_ct_RANLIB CPP CXX CXXFLAGS ac_ct_CXX CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE CXXCPP F77 FFLAGS ac_ct_F77 LIBTOOL PKG_CONFIG ac_pt_PKG_CONFIG XORG_CFLAGS XORG_LIBS DRI_TRUE DRI_FALSE DRI_CFLAGS DRI_LIBS ATIMISC_CPIO_TRUE ATIMISC_CPIO_FALSE ATIMISC_NON_PCI_TRUE ATIMISC_NON_PCI_FALSE ATIMISC_DGA_TRUE ATIMISC_DGA_FALSE ATIMISC_TV_OUT_TRUE ATIMISC_TV_OUT_FALSE USE_EXA_TRUE USE_EXA_FALSE moduledir DRIVER_NAME APP_MAN_SUFFIX LIB_MAN_SUFFIX FILE_MAN_SUFFIX MISC_MAN_SUFFIX DRIVER_MAN_SUFFIX ADMIN_MAN_SUFFIX APP_MAN_DIR LIB_MAN_DIR FILE_MAN_DIR MISC_MAN_DIR DRIVER_MAN_DIR ADMIN_MAN_DIR BUILD_LINUXDOC_TRUE BUILD_LINUXDOC_FALSE LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -20290,91 +20290,25 @@
 fi
 
 
-if test "$DRI" != no; then
-	as_ac_File=`echo "ac_cv_file_${sdkdir}/dri.h" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for ${sdkdir}/dri.h" >&5
-echo $ECHO_N "checking for ${sdkdir}/dri.h... $ECHO_C" >&6
-if eval "test \"\${$as_ac_File+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  test "$cross_compiling" = yes &&
-  { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
-echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
-   { (exit 1); exit 1; }; }
-if test -r "${sdkdir}/dri.h"; then
-  eval "$as_ac_File=yes"
-else
-  eval "$as_ac_File=no"
-fi
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_File'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_File'}'`" >&6
-if test `eval echo '${'$as_ac_File'}'` = yes; then
-  have_dri_h="yes"
-else
-  have_dri_h="no"
-fi
-
-	as_ac_File=`echo "ac_cv_file_${sdkdir}/sarea.h" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for ${sdkdir}/sarea.h" >&5
-echo $ECHO_N "checking for ${sdkdir}/sarea.h... $ECHO_C" >&6
-if eval "test \"\${$as_ac_File+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  test "$cross_compiling" = yes &&
-  { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
-echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
-   { (exit 1); exit 1; }; }
-if test -r "${sdkdir}/sarea.h"; then
-  eval "$as_ac_File=yes"
-else
-  eval "$as_ac_File=no"
-fi
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_File'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_File'}'`" >&6
-if test `eval echo '${'$as_ac_File'}'` = yes; then
-  have_sarea_h="yes"
-else
-  have_sarea_h="no"
-fi
-
-	as_ac_File=`echo "ac_cv_file_${sdkdir}/dristruct.h" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for ${sdkdir}/dristruct.h" >&5
-echo $ECHO_N "checking for ${sdkdir}/dristruct.h... $ECHO_C" >&6
-if eval "test \"\${$as_ac_File+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  test "$cross_compiling" = yes &&
-  { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
-echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
-   { (exit 1); exit 1; }; }
-if test -r "${sdkdir}/dristruct.h"; then
-  eval "$as_ac_File=yes"
-else
-  eval "$as_ac_File=no"
-fi
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_File'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_File'}'`" >&6
-if test `eval echo '${'$as_ac_File'}'` = yes; then
-  have_dristruct_h="yes"
-else
-  have_dristruct_h="no"
-fi
-
-fi
+#if test "$DRI" != no; then
+#	AC_CHECK_FILE([${sdkdir}/dri.h],
+#                      [have_dri_h="yes"], [have_dri_h="no"])
+#	AC_CHECK_FILE([${sdkdir}/sarea.h],
+#                      [have_sarea_h="yes"], [have_sarea_h="no"])
+#	AC_CHECK_FILE([${sdkdir}/dristruct.h],
+#                      [have_dristruct_h="yes"], [have_dristruct_h="no"])
+#fi
 
 echo "$as_me:$LINENO: checking whether to include DRI support" >&5
 echo $ECHO_N "checking whether to include DRI support... $ECHO_C" >&6
 if test x$DRI = xauto; then
-	if test "$have_dri_h" = yes -a \
-                "$have_sarea_h" = yes -a \
-                "$have_dristruct_h" = yes; then
+#	if test "$have_dri_h" = yes -a \
+#               "$have_sarea_h" = yes -a \
+#               "$have_dristruct_h" = yes; then
 		DRI="yes"
-	else
-		DRI="no"
-	fi
+#	else
+#		DRI="no"
+#	fi
 fi
 echo "$as_me:$LINENO: result: $DRI" >&5
 echo "${ECHO_T}$DRI" >&6
@@ -20650,94 +20584,34 @@
 echo $ECHO_N "checking whether to enable EXA support... $ECHO_C" >&6
 if test "x$EXA" = xyes; then
         echo "yes"
-        as_ac_File=`echo "ac_cv_file_${sdkdir}/exa.h" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for ${sdkdir}/exa.h" >&5
-echo $ECHO_N "checking for ${sdkdir}/exa.h... $ECHO_C" >&6
-if eval "test \"\${$as_ac_File+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  test "$cross_compiling" = yes &&
-  { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
-echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
-   { (exit 1); exit 1; }; }
-if test -r "${sdkdir}/exa.h"; then
-  eval "$as_ac_File=yes"
-else
-  eval "$as_ac_File=no"
-fi
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_File'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_File'}'`" >&6
-if test `eval echo '${'$as_ac_File'}'` = yes; then
-  have_exa_h="yes"
-else
-  have_exa_h="no"
-fi
+#        AC_CHECK_FILE([${sdkdir}/exa.h],
+#                      [have_exa_h="yes"], [have_exa_h="no"])
+
+cat >>confdefs.h <<\_ACEOF
+#define USE_EXA 1
+_ACEOF
 
 else
         echo "no"
 fi
 
-if test "x$have_exa_h" = xyes; then
-        echo "$as_me:$LINENO: checking wether EXA version is at least 2.0.0" >&5
-echo $ECHO_N "checking wether EXA version is at least 2.0.0... $ECHO_C" >&6
-        cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
+#if test "x$have_exa_h" = xyes; then
+#        AC_MSG_CHECKING([wether EXA version is at least 2.0.0])
+#        AC_PREPROC_IFELSE([AC_LANG_PROGRAM([[
 #include "${sdkdir}/exa.h"
 #if EXA_VERSION_MAJOR < 2
 #error OLD EXA!
 #endif
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
-_ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  USE_EXA=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  USE_EXA=no
-fi
-rm -f conftest.err conftest.$ac_ext
-        if test "x$USE_EXA" = xyes; then
-                echo "yes."
-
-cat >>confdefs.h <<\_ACEOF
-#define USE_EXA 1
-_ACEOF
-
-        else
-                echo "no."
-        fi
-fi
+#                          ]])],
+#                          [USE_EXA=yes],
+#                          [USE_EXA=no])
+#        if test "x$USE_EXA" = xyes; then
+#                echo "yes."
+#                AC_DEFINE(USE_EXA, 1, [Build support for Exa])
+#        else
+#                echo "no."
+#        fi
+#fi
 
 
 
@@ -20872,124 +20746,10 @@
 echo "$as_me: Building with package name set to $PACKAGE" >&6;}
 	fi
 
-
-as_ac_File=`echo "ac_cv_file_$prefix/share/X11/sgml/defs.ent" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for $prefix/share/X11/sgml/defs.ent" >&5
-echo $ECHO_N "checking for $prefix/share/X11/sgml/defs.ent... $ECHO_C" >&6
-if eval "test \"\${$as_ac_File+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  test "$cross_compiling" = yes &&
-  { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
-echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
-   { (exit 1); exit 1; }; }
-if test -r "$prefix/share/X11/sgml/defs.ent"; then
-  eval "$as_ac_File=yes"
-else
-  eval "$as_ac_File=no"
-fi
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_File'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_File'}'`" >&6
-if test `eval echo '${'$as_ac_File'}'` = yes; then
-  DEFS_ENT_PATH=$prefix/share/X11/sgml
-else
-  DEFS_ENT_PATH=
-
-fi
-
-
-# Extract the first word of "linuxdoc", so it can be a program name with args.
-set dummy linuxdoc; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_LINUXDOC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $LINUXDOC in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_LINUXDOC="$LINUXDOC" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_LINUXDOC="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-LINUXDOC=$ac_cv_path_LINUXDOC
-
-if test -n "$LINUXDOC"; then
-  echo "$as_me:$LINENO: result: $LINUXDOC" >&5
-echo "${ECHO_T}$LINUXDOC" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-# Extract the first word of "ps2pdf", so it can be a program name with args.
-set dummy ps2pdf; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_path_PS2PDF+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  case $PS2PDF in
-  [\\/]* | ?:[\\/]*)
-  ac_cv_path_PS2PDF="$PS2PDF" # Let the user override the test with a path.
-  ;;
-  *)
-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_path_PS2PDF="$as_dir/$ac_word$ac_exec_ext"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-  ;;
-esac
-fi
-PS2PDF=$ac_cv_path_PS2PDF
-
-if test -n "$PS2PDF"; then
-  echo "$as_me:$LINENO: result: $PS2PDF" >&5
-echo "${ECHO_T}$PS2PDF" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-
-echo "$as_me:$LINENO: checking Whether to build documentation" >&5
-echo $ECHO_N "checking Whether to build documentation... $ECHO_C" >&6
-
-if test x$DEFS_ENT_PATH != x && test x$LINUXDOC != x ; then
-   BUILDDOC=yes
-else
-   BUILDDOC=no
-fi
-
+#XORG_CHECK_LINUXDOC
 
 
-if test x$BUILDDOC = xyes; then
+if false; then
   BUILD_LINUXDOC_TRUE=
   BUILD_LINUXDOC_FALSE='#'
 else
@@ -20998,43 +20758,6 @@
 fi
 
 
-echo "$as_me:$LINENO: result: $BUILDDOC" >&5
-echo "${ECHO_T}$BUILDDOC" >&6
-
-echo "$as_me:$LINENO: checking Whether to build pdf documentation" >&5
-echo $ECHO_N "checking Whether to build pdf documentation... $ECHO_C" >&6
-
-if test x$PS2PDF != x ; then
-   BUILDPDFDOC=yes
-else
-   BUILDPDFDOC=no
-fi
-
-
-
-if test x$BUILDPDFDOC = xyes; then
-  BUILD_PDFDOC_TRUE=
-  BUILD_PDFDOC_FALSE='#'
-else
-  BUILD_PDFDOC_TRUE='#'
-  BUILD_PDFDOC_FALSE=
-fi
-
-
-echo "$as_me:$LINENO: result: $BUILDPDFDOC" >&5
-echo "${ECHO_T}$BUILDPDFDOC" >&6
-
-MAKE_TEXT="SGML_SEARCH_PATH=$DEFS_ENT_PATH GROFF_NO_SGR=y $LINUXDOC -B txt"
-MAKE_PS="SGML_SEARCH_PATH=$DEFS_ENT_PATH $LINUXDOC -B latex --papersize=letter --output=ps"
-MAKE_PDF="$PS2PDF"
-MAKE_HTML="SGML_SEARCH_PATH=$DEFS_ENT_PATH $LINUXDOC  -B html --split=0"
-
-
-
-
-
-
-
                               ac_config_files="$ac_config_files Makefile src/Makefile man/Makefile"
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -21211,13 +20934,6 @@
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
-if test -z "${BUILD_PDFDOC_TRUE}" && test -z "${BUILD_PDFDOC_FALSE}"; then
-  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PDFDOC\" was never defined.
-Usually this means the macro was only invoked conditionally." >&5
-echo "$as_me: error: conditional \"BUILD_PDFDOC\" was never defined.
-Usually this means the macro was only invoked conditionally." >&2;}
-   { (exit 1); exit 1; }; }
-fi
 
 : ${CONFIG_STATUS=./config.status}
 ac_clean_files_save=$ac_clean_files
@@ -21852,16 +21568,8 @@
 s,@MISC_MAN_DIR@,$MISC_MAN_DIR,;t t
 s,@DRIVER_MAN_DIR@,$DRIVER_MAN_DIR,;t t
 s,@ADMIN_MAN_DIR@,$ADMIN_MAN_DIR,;t t
-s,@LINUXDOC@,$LINUXDOC,;t t
-s,@PS2PDF@,$PS2PDF,;t t
 s,@BUILD_LINUXDOC_TRUE@,$BUILD_LINUXDOC_TRUE,;t t
 s,@BUILD_LINUXDOC_FALSE@,$BUILD_LINUXDOC_FALSE,;t t
-s,@BUILD_PDFDOC_TRUE@,$BUILD_PDFDOC_TRUE,;t t
-s,@BUILD_PDFDOC_FALSE@,$BUILD_PDFDOC_FALSE,;t t
-s,@MAKE_TEXT@,$MAKE_TEXT,;t t
-s,@MAKE_PS@,$MAKE_PS,;t t
-s,@MAKE_PDF@,$MAKE_PDF,;t t
-s,@MAKE_HTML@,$MAKE_HTML,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff -u xf86-video-ati-X11R7.1-6.6.0.orig/configure.ac xf86-video-ati-X11R7.1-6.6.0/configure.ac
--- xf86-video-ati-X11R7.1-6.6.0.orig/configure.ac	2006-05-21 01:33:20.000000000 +0200
+++ xf86-video-ati-X11R7.1-6.6.0/configure.ac	2006-06-11 00:28:46.000000000 +0200
@@ -75,24 +75,24 @@
 # Checks for header files.
 AC_HEADER_STDC
 
-if test "$DRI" != no; then
-	AC_CHECK_FILE([${sdkdir}/dri.h],
-                      [have_dri_h="yes"], [have_dri_h="no"])
-	AC_CHECK_FILE([${sdkdir}/sarea.h],
-                      [have_sarea_h="yes"], [have_sarea_h="no"])
-	AC_CHECK_FILE([${sdkdir}/dristruct.h],
-                      [have_dristruct_h="yes"], [have_dristruct_h="no"])
-fi
+#if test "$DRI" != no; then
+#	AC_CHECK_FILE([${sdkdir}/dri.h],
+#                      [have_dri_h="yes"], [have_dri_h="no"])
+#	AC_CHECK_FILE([${sdkdir}/sarea.h],
+#                      [have_sarea_h="yes"], [have_sarea_h="no"])
+#	AC_CHECK_FILE([${sdkdir}/dristruct.h],
+#                      [have_dristruct_h="yes"], [have_dristruct_h="no"])
+#fi
 
 AC_MSG_CHECKING([whether to include DRI support])
 if test x$DRI = xauto; then
-	if test "$have_dri_h" = yes -a \
-                "$have_sarea_h" = yes -a \
-                "$have_dristruct_h" = yes; then
+#	if test "$have_dri_h" = yes -a \
+#               "$have_sarea_h" = yes -a \
+#               "$have_dristruct_h" = yes; then
 		DRI="yes"
-	else
-		DRI="no"
-	fi
+#	else
+#		DRI="no"
+#	fi
 fi
 AC_MSG_RESULT([$DRI])
 
@@ -177,29 +177,30 @@
 AC_MSG_CHECKING([whether to enable EXA support])
 if test "x$EXA" = xyes; then
         echo "yes"
-        AC_CHECK_FILE([${sdkdir}/exa.h],
-                      [have_exa_h="yes"], [have_exa_h="no"])
+#        AC_CHECK_FILE([${sdkdir}/exa.h],
+#                      [have_exa_h="yes"], [have_exa_h="no"])
+	AC_DEFINE(USE_EXA, 1, [Build support for Exa])
 else
         echo "no"
 fi 
 
-if test "x$have_exa_h" = xyes; then
-        AC_MSG_CHECKING([wether EXA version is at least 2.0.0])
-        AC_PREPROC_IFELSE([AC_LANG_PROGRAM([[
+#if test "x$have_exa_h" = xyes; then
+#        AC_MSG_CHECKING([wether EXA version is at least 2.0.0])
+#        AC_PREPROC_IFELSE([AC_LANG_PROGRAM([[
 #include "${sdkdir}/exa.h"
 #if EXA_VERSION_MAJOR < 2
 #error OLD EXA!
 #endif
-                          ]])],
-                          [USE_EXA=yes],
-                          [USE_EXA=no])
-        if test "x$USE_EXA" = xyes; then
-                echo "yes."
-                AC_DEFINE(USE_EXA, 1, [Build support for Exa])
-        else
-                echo "no."
-        fi
-fi
+#                          ]])],
+#                          [USE_EXA=yes],
+#                          [USE_EXA=no])
+#        if test "x$USE_EXA" = xyes; then
+#                echo "yes."
+#                AC_DEFINE(USE_EXA, 1, [Build support for Exa])
+#        else
+#                echo "no."
+#        fi
+#fi
 
 AM_CONDITIONAL(USE_EXA, test "x$USE_EXA" = xyes)
 
@@ -212,7 +213,8 @@
 
 XORG_MANPAGE_SECTIONS
 XORG_RELEASE_VERSION
-XORG_CHECK_LINUXDOC
+#XORG_CHECK_LINUXDOC
+AM_CONDITIONAL(BUILD_LINUXDOC, false)
 
 AC_OUTPUT([
 	Makefile
