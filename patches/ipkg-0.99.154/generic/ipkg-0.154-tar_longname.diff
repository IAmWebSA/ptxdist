diff -urN ipkg-0.99.154.orig/libbb/unarchive.c ipkg-0.99.154/libbb/unarchive.c
--- ipkg-0.99.154.orig/libbb/unarchive.c	2005-09-15 11:46:46.000000000 +0200
+++ ipkg-0.99.154/libbb/unarchive.c	2005-12-21 16:13:42.000000000 +0100
@@ -28,7 +28,7 @@
 #include "libbb.h"
 
 #define CONFIG_FEATURE_TAR_OLDGNU_COMPATABILITY 1
-// #define CONFIG_FEATURE_TAR_GNU_EXTENSIONS
+#define CONFIG_FEATURE_TAR_GNU_EXTENSIONS
 
 #ifdef CONFIG_FEATURE_TAR_GNU_EXTENSIONS
 static char *longname = NULL;
@@ -657,7 +657,8 @@
 # ifdef CONFIG_FEATURE_TAR_GNU_EXTENSIONS
 	case 'L': {
 			longname = xmalloc(tar_entry->size + 1);
-			archive_xread_all((int) tar_stream, longname, tar_entry->size);
+			if(fread(longname, tar_entry->size, 1, tar_stream) != 1)
+				return NULL;
 			longname[tar_entry->size] = '\0';
 			archive_offset += tar_entry->size;
 
@@ -665,7 +666,8 @@
 		}
 	case 'K': {
 			linkname = xmalloc(tar_entry->size + 1);
-			archive_xread_all((int) tar_stream, longname, tar_entry->size);
+			if(fread(linkname, tar_entry->size, 1, tar_stream) != 1)
+				return NULL;
 			linkname[tar_entry->size] = '\0';
 			archive_offset += tar_entry->size;
 
