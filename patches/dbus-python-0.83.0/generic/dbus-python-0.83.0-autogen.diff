---
 configure  |   71 ++++++++++++++++++++++++++++++++++++-------------------------
 aclocal.m4 |    1 
 2 files changed, 44 insertions(+), 28 deletions(-)

Index: dbus-python-0.83.0/aclocal.m4
===================================================================
--- dbus-python-0.83.0.orig/aclocal.m4
+++ dbus-python-0.83.0/aclocal.m4
@@ -7873,3 +7873,4 @@ m4_include([m4/am-check-pymod.m4])
 m4_include([m4/am-check-python-headers.m4])
 m4_include([m4/dbus-py-add-rst2htmlflag.m4])
 m4_include([m4/jh-add-cflag.m4])
+
Index: dbus-python-0.83.0/configure
===================================================================
--- dbus-python-0.83.0.orig/configure
+++ dbus-python-0.83.0/configure
@@ -1503,6 +1503,7 @@ Optional Packages:
   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]
   --with-pic              try to use only PIC/non-PIC objects [default=use
                           both]
+  --with-python-includes  set python include path manually
 
 Some influential environment variables:
   CC          C compiler command
@@ -4366,7 +4367,7 @@ ia64-*-hpux*)
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 4369 "configure"' > conftest.$ac_ext
+  echo '#line 4370 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -6456,11 +6457,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6459: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6460: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:6463: \$? = $ac_status" >&5
+   echo "$as_me:6464: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -6746,11 +6747,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6749: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6750: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:6753: \$? = $ac_status" >&5
+   echo "$as_me:6754: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -6850,11 +6851,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6853: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6854: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:6857: \$? = $ac_status" >&5
+   echo "$as_me:6858: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -7111,7 +7112,7 @@ EOF
 
 	if test $supports_anon_versioning = yes; then
 	  archive_expsym_cmds='$echo "{ global:" > $output_objdir/$libname.ver~
-  cat $export_symbols | sed -e "s/\(.*\)/\1;/" >> $output_objdir/$libname.ver~
+  cat $export_symbols | sed -e "s/\(.*\)/'"$ac_symprfx"'\1;/" >> $output_objdir/$libname.ver~
   $echo "local: *; };" >> $output_objdir/$libname.ver~
 	  $CC '"$tmp_sharedflag""$tmp_addflag"' $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname ${wl}-version-script ${wl}$output_objdir/$libname.ver -o $lib'
 	fi
@@ -8018,7 +8019,7 @@ else
   sys_lib_search_path_spec="/lib /usr/lib /usr/local/lib"
 fi
 need_lib_prefix=unknown
-hardcode_into_libs=no
+hardcode_into_libs="no"
 
 # when you set need_version to no, make sure it does not cause -set_version
 # flags to be left without arguments
@@ -9227,7 +9228,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 9230 "configure"
+#line 9231 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -9327,7 +9328,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 9330 "configure"
+#line 9331 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -9855,16 +9856,16 @@ shlibpath_overrides_runpath=$shlibpath_o
 hardcode_action=$hardcode_action
 
 # Whether we should hardcode library paths into libraries.
-hardcode_into_libs=$hardcode_into_libs
+hardcode_into_libs="no"
 
 # Flag to hardcode \$libdir into a binary during linking.
 # This must work even if \$libdir does not exist.
-hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec
+hardcode_libdir_flag_spec=""
 
 # If ld is used when linking, flag to hardcode \$libdir into
 # a binary during linking. This must work even if \$libdir does
 # not exist.
-hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld
+hardcode_libdir_flag_spec_ld=""
 
 # Whether we need a single -rpath flag with a separated argument.
 hardcode_libdir_separator=$lt_hardcode_libdir_separator
@@ -10174,27 +10175,41 @@ echo "${ECHO_T}$am_cv_python_pyexecdir" 
 
 
 
-{ echo "$as_me:$LINENO: checking for Python headers using $PYTHON-config --includes" >&5
+
+# Check whether --with-python_includes was given.
+if test "${with_python_includes+set}" = set; then
+  withval=$with_python_includes;
+    PYTHON_INCLUDES="-I${withval}/python${PYTHON_VERSION}"
+    { echo "$as_me:$LINENO: Using manually defined python include path" >&5
+echo "$as_me: Using manually defined python include path" >&6;}
+
+else
+
+    { echo "$as_me:$LINENO: checking for Python headers using $PYTHON-config --includes" >&5
 echo $ECHO_N "checking for Python headers using $PYTHON-config --includes... $ECHO_C" >&6; }
-PYTHON_INCLUDES=`$PYTHON-config --includes`
-if test $? = 0; then
-  { echo "$as_me:$LINENO: result: $PYTHON_INCLUDES" >&5
+    PYTHON_INCLUDES=`$PYTHON-config --includes`
+    if test $? = 0; then
+      { echo "$as_me:$LINENO: result: $PYTHON_INCLUDES" >&5
 echo "${ECHO_T}$PYTHON_INCLUDES" >&6; }
-else
-  { echo "$as_me:$LINENO: result: failed, will try another way" >&5
+    else
+      { echo "$as_me:$LINENO: result: failed, will try another way" >&5
 echo "${ECHO_T}failed, will try another way" >&6; }
-  py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
-  py_exec_prefix=`$PYTHON -c "import sys; print sys.exec_prefix"`
-  { echo "$as_me:$LINENO: checking for Python headers in $py_prefix and $py_exec_prefix" >&5
+      py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
+      py_exec_prefix=`$PYTHON -c "import sys; print sys.exec_prefix"`
+      { echo "$as_me:$LINENO: checking for Python headers in $py_prefix and $py_exec_prefix" >&5
 echo $ECHO_N "checking for Python headers in $py_prefix and $py_exec_prefix... $ECHO_C" >&6; }
-  PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
-  if test "$py_prefix" != "$py_exec_prefix"; then
-    PYTHON_INCLUDES="$PYTHON_INCLUDES -I${py_exec_prefix}/include/python${PYTHON_VERSION}"
-  fi
-  { echo "$as_me:$LINENO: result: $PYTHON_INCLUDES" >&5
+      PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
+      if test "$py_prefix" != "$py_exec_prefix"; then
+        PYTHON_INCLUDES="$PYTHON_INCLUDES -I${py_exec_prefix}/include/python${PYTHON_VERSION}"
+      fi
+      { echo "$as_me:$LINENO: result: $PYTHON_INCLUDES" >&5
 echo "${ECHO_T}$PYTHON_INCLUDES" >&6; }
+    fi
+
+
 fi
 
+
 { echo "$as_me:$LINENO: checking whether those headers are sufficient" >&5
 echo $ECHO_N "checking whether those headers are sufficient... $ECHO_C" >&6; }
 
