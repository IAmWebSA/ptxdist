Index: madwifi/net80211/Makefile
===================================================================
--- madwifi.orig/net80211/Makefile (revision 3067)
+++ madwifi/net80211/Makefile (revision 3603)
@@ -40,8 +40,5 @@
 # Makefile for the 802.11 WLAN modules.
 #
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/..
 #
Index: madwifi/ath_rate/onoe/Makefile
===================================================================
--- madwifi.orig/ath_rate/onoe/Makefile (revision 2834)
+++ madwifi/ath_rate/onoe/Makefile (revision 3603)
@@ -41,8 +41,5 @@
 # Makefile for the Atheros Rate Control Support.
 #
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/../..
 
Index: madwifi/ath_rate/amrr/Makefile
===================================================================
--- madwifi.orig/ath_rate/amrr/Makefile (revision 2834)
+++ madwifi/ath_rate/amrr/Makefile (revision 3603)
@@ -41,8 +41,5 @@
 # Makefile for the Atheros Rate Control Support.
 #
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/../..
 
Index: madwifi/ath_rate/sample/Makefile
===================================================================
--- madwifi.orig/ath_rate/sample/Makefile (revision 2834)
+++ madwifi/ath_rate/sample/Makefile (revision 3603)
@@ -39,8 +39,5 @@
 # Makefile for the Atheros Rate Control Support.
 #
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/../..
 
Index: madwifi/ath_rate/Makefile
===================================================================
--- madwifi.orig/ath_rate/Makefile (revision 2235)
+++ madwifi/ath_rate/Makefile (revision 3603)
@@ -1,6 +1,3 @@
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/..
 
Index: madwifi/ath_rate/minstrel/Makefile
===================================================================
--- madwifi.orig/ath_rate/minstrel/Makefile (revision 2834)
+++ madwifi/ath_rate/minstrel/Makefile (revision 3603)
@@ -39,8 +39,5 @@
 # Makefile for the Atheros Rate Control Support.
 #
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/../..
 
Index: madwifi/ath_hal/Makefile
===================================================================
--- madwifi.orig/ath_hal/Makefile (revision 3599)
+++ madwifi/ath_hal/Makefile (revision 3603)
@@ -41,8 +41,5 @@
 #
 
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/..
 
Index: madwifi/ath/Makefile
===================================================================
--- madwifi.orig/ath/Makefile (revision 3268)
+++ madwifi/ath/Makefile (revision 3603)
@@ -41,8 +41,5 @@
 #
 
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)/..
 
Index: madwifi/Makefile
===================================================================
--- madwifi.orig/Makefile (revision 3225)
+++ madwifi/Makefile (revision 3603)
@@ -41,8 +41,5 @@
 #
 
-ifeq ($(obj),)
-obj=	.
-endif
-
+obj := $(firstword $(obj) $(SUBDIRS) .)
 TOP = $(obj)
 
