#
# Submitted-By: Marc Kleine-Budde, 2005-06-09
# Committed-By: Marc Kleine-Budde
#
# Error:
#
#         INSTALL_DATA /etc/mke2fs.conf
# /usr/bin/install: cannot create regular file `/etc/mke2fs.conf': Permission denied
#
# "make install" installs into /etc ignoring the --prefix
#
# Description:
#
# This patch fixes it by installing into $(root_sysconfdir)
#
# State:
# 
# should be send upstream :)
#
Index: misc/Makefile.in
===================================================================
--- a/misc/Makefile.in.orig
+++ b/misc/Makefile.in
@@ -228,7 +228,7 @@ installdirs:
 		$(DESTDIR)$(root_sbindir) $(DESTDIR)$(bindir) \
 		$(DESTDIR)$(man1dir) $(DESTDIR)$(man8dir) \
 		$(DESTDIR)$(man1dir) $(DESTDIR)$(man5dir) \
-		$(DESTDIR)$(libdir) $(DESTDIR)/etc
+		$(DESTDIR)$(libdir) $(DESTDIR)/$(root_sysconfdir)
 
 install: all $(SMANPAGES) $(UMANPAGES) installdirs
 	@for i in $(SPROGS); do \
@@ -288,10 +288,10 @@ install: all $(SMANPAGES) $(UMANPAGES) i
 		echo "	INSTALL_DATA $(man5dir)/$$i"; \
 		$(INSTALL_DATA) $$i $(DESTDIR)$(man5dir)/$$i; \
 	done
-	@if ! test -f $(DESTDIR)/etc/mke2fs.conf; then \
-		echo "	INSTALL_DATA /etc/mke2fs.conf"; \
+	@if ! test -f $(DESTDIR)$(root_sysconfdir)/mke2fs.conf; then \
+		echo "	INSTALL_DATA $(root_sysconfdir)/mke2fs.conf"; \
 		$(INSTALL_DATA) $(srcdir)/mke2fs.conf \
-			$(DESTDIR)/etc/mke2fs.conf; \
+			$(DESTDIR)$(root_sysconfdir)/mke2fs.conf; \
 	fi
 
 install-strip: install
@@ -336,8 +336,8 @@ uninstall:
 	for i in $(FMANPAGES); do \
 		$(RM) -f $(DESTDIR)$(man5dir)/$$i; \
 	done
-	if cmp -s $(srcdir)/mke2fs.conf $(DESTDIR)/etc/mke2fs.conf; then \
-		$(RM) $(DESTDIR)/etc/mke2fs.conf; \
+	if cmp -s $(srcdir)/mke2fs.conf $(DESTDIR)$(root_sysconfdir)/mke2fs.conf; then \
+		$(RM) $(DESTDIR)$(root_sysconfdir)/mke2fs.conf; \
 	fi
 
 clean:
