--- crosstool-0.38-orig/patches/glibc-2.3.6/glibc-2.3.4-allow-gcc-4.0-powerpc64.patch	1970-01-01 01:00:00.000000000 +0100
+++ crosstool-0.38/patches/glibc-2.3.6/glibc-2.3.4-allow-gcc-4.0-powerpc64.patch	2006-01-16 08:16:12.000000000 +0100
@@ -0,0 +1,65 @@
+Fixes:
+
+In file included from dynamic-link.h:22,
+                 from dl-reloc.c:269:
+../sysdeps/powerpc/powerpc64/dl-machine.h: In function '_dl_relocate_object':
+../sysdeps/powerpc/powerpc64/dl-machine.h:573: error: invalid storage class for function 'elf_machine_rela_relative'
+../sysdeps/powerpc/powerpc64/dl-machine.h:607: error: invalid storage class for function 'elf_machine_rela'
+../sysdeps/powerpc/powerpc64/dl-machine.h:889: error: invalid storage class for function 'elf_machine_lazy_rel'
+make[2]: Leaving directory `/home/dank/queue/jobdir.fast2/crosstool-dev/build/powerpc64-unknown-linux-gnu/gcc-4.0-20050305-glibc-2.3-20050307/glibc-2.3-20050307/elf'
+
+Index: glibc-2.3.6/sysdeps/powerpc/powerpc64/dl-machine.h
+===================================================================
+--- glibc-2.3.6.orig/sysdeps/powerpc/powerpc64/dl-machine.h
++++ glibc-2.3.6/sysdeps/powerpc/powerpc64/dl-machine.h
+@@ -567,8 +567,14 @@ extern void _dl_reloc_overflow (struct l
+                                 const Elf64_Sym *refsym)
+                                 attribute_hidden;
+ 
+-auto inline void
+-__attribute__ ((always_inline))
++#if __GNUC__ >= 4
++  auto inline void
++#else
++  static inline void
++#endif
++#if __GNUC__ >= 4 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 2)
++  __attribute ((always_inline))
++#endif
+ elf_machine_rela_relative (Elf64_Addr l_addr, const Elf64_Rela *reloc,
+ 			   void *const reloc_addr_arg)
+ {
+@@ -599,8 +605,14 @@ elf_machine_tprel (struct link_map *map,
+ 
+ /* Perform the relocation specified by RELOC and SYM (which is fully
+    resolved).  MAP is the object containing the reloc.  */
+-auto inline void
+-__attribute__ ((always_inline))
++#if __GNUC__ >= 4
++  auto inline void
++#else
++  static inline void
++#endif
++#if __GNUC__ >= 4 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 2)
++  __attribute ((always_inline))
++#endif
+ elf_machine_rela (struct link_map *map,
+ 		  const Elf64_Rela *reloc,
+ 		  const Elf64_Sym *sym,
+@@ -885,8 +897,14 @@ elf_machine_rela (struct link_map *map,
+   MODIFIED_CODE_NOQUEUE (reloc_addr);
+ }
+ 
+-auto inline void
+-__attribute__ ((always_inline))
++#if __GNUC__ >= 4
++  auto inline void
++#else
++  static inline void
++#endif
++#if __GNUC__ >= 4 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 2)
++  __attribute ((always_inline))
++#endif
+ elf_machine_lazy_rel (struct link_map *map,
+ 		      Elf64_Addr l_addr, const Elf64_Rela *reloc)
+ {
