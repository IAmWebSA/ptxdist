## SECTION=shell_and_console
menuconfig UDEV
	tristate
	prompt "udev                          "
	select ROOTFS_DEV
	help
	  udev provides a dynamic device directory containing only the files for
	  actually present devices. It creates or removes device node files in the
	  /dev directory, or it renames network interfaces.

	  Usually udev runs as udevd(8) and receives uevents directly from the
	  kernel if a device is added or removed from the system.

	  If udev receives a device event, it matches its configured rules against
	  the available device attributes provided in sysfs to identify the
	  device. Rules that match, may provide additional device information or
	  specify a device node name and multiple symlink names and instruct udev
	  to run additional programs as part of the device event handling.

	  Ensure: This udev implementation requires at least kernel 2.6.15 and
	  must have sysfs, unix domain sockets and networking enabled.

if UDEV

menu "build options                 "

	config UDEV__DEBUG
		bool
		prompt "enable debug messages"
		help
		  If enabled, very verbose debugging messages will be compiled
		  into the udev binaries. The actual level of debugging is specified
		  in the udev config file (refer entry "udev_log")

	config UDEV__SELINUX
		bool
		# not supported yet
		# prompt "enable selinux support"

	config UDEV__SYSLOG
		bool
		prompt "syslog support"
		help
		  If enabled, udev is able to pass errors or debug information
		  to syslog. This is very useful to see what udev is doing or not doing.
		  Note: To use this feature the syslog daemon must start before udev

endmenu

menu "extras                        "

	config UDEV__EXTRA_ATA_ID
		bool
		prompt "ata_id"
		help
		  udev callout to read product/serial number from ATA drives

	config UDEV__EXTRA_CDROM_ID
		bool
		prompt "cdrom_id"
		help
		  udev callout to determine the capabilities of optical drives and media

	config UDEV__EXTRA_COLLECT
		bool
		prompt "collect"
		help
		  Collect variables across events

	config UDEV__EXTRA_EDD_ID
		bool
		prompt "edd_id"
		help
		  FIXME

	config UDEV__EXTRA_FIRMWARE
		bool
		prompt "firmware"
		help
	  	  This is a small helper script to load some kind of firmware on demand

	config UDEV__EXTRA_FLOPPY
		bool
		prompt "floppy"
		help
		  FIXME

	config UDEV__EXTRA_FSTAB_IMPORT
		bool
		prompt "fstab_import"
		help
		  Find matching entry in fstab and export it

	config UDEV__EXTRA_PATH_ID
		bool
		prompt "path_id"
		help
		  udev callout to create a device path based unique name for a device to
		  implement the Linux Persistent Device Naming scheme

	config UDEV__EXTRA_RULE_GENERATOR
		bool
		prompt "rule_generator"
		help
		  FIXME

	config UDEV__EXTRA_SCSI_ID
		bool
		prompt "scsi_id"
		help
		  Used to build unique IDs for an SCSI media to identify it again

	config UDEV__EXTRA_USB_ID
		bool
		prompt "usb_id"
		help
		    This is a helper to generate unique information about some kind of
		    USB device. This is required to ensure the same hotplugged device to
		    appear always at the same device node (via link)

	config UDEV__EXTRA_VOLUME_ID
		bool
		prompt "volume_id"
		help
		  FIXME

endmenu

menu "install options               "

	config UDEV__INSTALL_TEST_UDEV
		bool
		prompt "install test-udev"
		help
		  FIXME

	config UDEV__RC_D_LINK
		string
		prompt "link name in /etc/rc.d"
		default "S00_udev"
		help
		  Enter the name of the udev start link in /etc/init.d; this should
		  be something like "S00_udev". An empty string means that no link
		  is created.

	config ROOTFS_ETC_UDEV__CONF
		bool
		default y
		prompt "Install udev.conf"
		help
		  Installs /etc/udev/udev.conf from a selectable source

		choice
			prompt "Kind of udev.conf"
			default ROOTFS_ETC_UDEV__CONF_DEFAULT
			depends on ROOTFS_ETC_UDEV__CONF

			config ROOTFS_ETC_UDEV__CONF_DEFAULT
				bool
				prompt "Use generic"
				help
				  Installs a generic /etc/udev/udev.conf file.
				  See <ptxdist-install>/generic/etc/udev/udev.conf

			config ROOTFS_ETC_UDEV__CONF_USER
				bool
				prompt "User defined"
				help
				  This uses a user defined udev.conf file. PTXdist
				  uses file projectroot/etc/udev/udev.conf in your
				  local project.
				  Note: If you locate the *.rules path to another
				  location than /etc/udev/rules.d, you must install any
				  udev rules by your own.

		endchoice

	config ROOTFS_UDEV__DEFAULT_RULES
		bool
		prompt "Install default udev rules"
		help
		  This will install the generic udev rules files from the udev package
		  under /lib/udev/rules.d/

	endmenu

endif

