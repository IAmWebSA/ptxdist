# dbus configuration

menuconfig DBUS
	tristate
	prompt "dbus                          "
	select EXPAT		if DBUS_XML_EXPAT
	select LIBXML2		if DBUS_XML_LIBXML2
	select XORG_LIB_X11	if DBUS_X
	help
	  D-Bus is a message bus system, a simple way for applications
	  to talk to one another. For details see the project homepage:

	  http://www.freedesktop.org/wiki/Software_2fdbus

if DBUS

choice
	prompt "xml library       "

	config DBUS_XML_EXPAT
		bool
		prompt "expat  "

	config DBUS_XML_LIBXML2
		bool
		prompt "libxml2"
endchoice

config DBUS_USER
	string
	prompt "user for running the dbus daemon"
	default "messagebus"
	help
	  Enter the user name to run the D-Bus daemon with. The PTXdist
	  standard configuration has only root, so if you want to use
	  the dbus default user "messagebus" you have to create a
	  related user yourself.

config DBUS_X
	bool
	prompt "enable X support"
	help
	  Enable this option to build dbus with support for X.

config ROOTFS_DBUS_SYSTEM_CONF
	bool
	prompt "/etc/dbus-1/system.conf"
	default y
	help
	  Installs a /etc/dbus-1/system.conf file from a selectable source.

	choice
		prompt "Kind of /etc/dbus-1/system.conf"
		depends on ROOTFS_DBUS_SYSTEM_CONF
		default ROOTFS_GENERIC_DBUS_SYSTEM_CONF

		config ROOTFS_GENERIC_DBUS_SYSTEM_CONF
			bool
			prompt "Use generic"
			help
			  This uses the generic configuration file for your dbus which is
			  shipped with the sources. This configuration is likely to fail
			  because it is thought for a desktop PC.

		config ROOTFS_USER_DBUS_SYSTEM_CONF
			bool
			prompt "User defined"
			help
			  This uses a user defined /etc/dbus-1/system.conf. PTXdist
			  uses file projectroot/etc/dbus-1/system.conf in your local
			  project.

	endchoice

config ROOTFS_DBUS_SESSION_CONF
	bool
	prompt "/etc/dbus-1/session.conf"
	default y
	help
	  Installs a /etc/dbus-1/session.conf file from a selectable source.

	choice
		prompt "Kind of /etc/dbus-1/session.conf"
		depends on ROOTFS_DBUS_SESSION_CONF
		default ROOTFS_GENERIC_DBUS_SESSION_CONF

		config ROOTFS_GENERIC_DBUS_SESSION_CONF
			bool
			prompt "Use generic"
			help
	  	  This uses the generic configuration file for your dbus which is
				shipped with the sources. This configuration is likely to fail
				because it is thought for a desktop PC.

		config ROOTFS_USER_DBUS_SESSION_CONF
			bool
			prompt "User defined"
			help
				This uses a user defined /etc/dbus-1/session.conf. PTXdist
				uses file projectroot/etc/dbus-1/session.conf in your local
				project.

	endchoice

#   --enable-tests          enable unit test code
#   --enable-ansi           enable -ansi -pedantic gcc flags
#   --enable-verbose-mode   support verbose debug mode
#   --enable-asserts        include assertion checks
#   --enable-checks         include sanity checks on public API
#   --enable-xml-docs       build XML documentation (requires xmlto)
#   --enable-doxygen-docs   build DOXYGEN documentation (requires Doxygen)
#   --enable-gcov           compile with coverage profiling instrumentation (gcc
#                           only)
#   --enable-abstract-sockets
#                           use abstract socket namespace (linux only)
#   --enable-selinux        build with SELinux support
#   --enable-dnotify        build with dnotify support (linux only)
#   --enable-kqueue         build with kqueue support
#   --enable-console-owner-file
#                           enable console owner file
#   --enable-shared[=PKGS]
#                           build shared libraries [default=yes]
#   --enable-static[=PKGS]
#                           build static libraries [default=yes]
#   --enable-fast-install[=PKGS]
#                           optimize for fast installation [default=yes]
#   --with-xml=libxml/expat XML library to use
#   --with-init-scripts=redhat
#                           Style of init scripts to install
#   --with-session-socket-dir=dirname
#                           Where to put sockets for the per-login-session
#                           message bus
#   --with-test-socket-dir=dirname
#                           Where to put sockets for make check
#   --with-system-pid-file=pidfile
#                           PID file for systemwide daemon
#   --with-system-socket=filename
#                           UNIX domain socket for systemwide daemon
#   --with-console-auth-dir=dirname
#                           directory to check for console ownerhip
#   --with-console-owner-file=filename
#                           file whose owner determines current console owner
#   --with-dbus-daemondir=dirname
#                           Directory for installing the DBUS daemon
#   --with-x                use the X Window System

config DBUS_INSTALL_STARTUP_SCRIPT
	bool
	prompt "Install startup script"
	help
	  This installs a startup script for dbus from a selectable source

	choice
		prompt "Kind of startup script"
		depends on DBUS_INSTALL_STARTUP_SCRIPT
		default ROOTFS_ETC_INITD_DBUS_GENERIC

		config ROOTFS_ETC_INITD_DBUS_GENERIC
			bool
			prompt "Use generic"
			help
			  Installs a generic /etc/init.d/dbus startup script.
			  See <ptxdist-install>/generic/etc/init.d/dbus

		config ROOTFS_ETC_INITD_DBUS_USER
			bool
			prompt "User defined"
			help
			This uses a user defined /etc/init.d/dbus. PTXdist uses
			file projectroot/etc/init.d/dbus in your local project.

	endchoice
endif
