# ----------------------------------------------------------------------------
menu "start scripts (/etc/init.d)   "
# ----------------------------------------------------------------------------

config ROOTFS_ETC_INITD
	depends on ROOTFS
	bool
	prompt "Generic Scripts for /etc/init.d"
	default y
	select BB_CONFIG_RUN_PARTS if BUSYBOX
	help
	  When enabled, this option copies the files from
	  ${PTXDIST_TOPDIR}/generic/etc/init.d to the target root
	  filesystem. The files contain useful defaults for most projects,
	  so if you don't intend to use your completely self-made etc
	  directory you should problably switch this on.

########################## rcS startup control ############################

menuconfig ROOTFS_ETC_INITD_RCS
	bool
	prompt "rcS                       "
	depends on ROOTFS_ETC_INITD
	default y
	help
	  The /etc/init.d/rcS script is started by init in /etc/inittab.
	  Its main purpose is to run the other init scripts by calling
	  run-parts.

	choice
		prompt "Kind of rcS script"
		default ROOTFS_ETC_INITD_RCS_DEFAULT
		depends on ROOTFS_ETC_INITD_RCS

		config ROOTFS_ETC_INITD_RCS_DEFAULT
			bool
			prompt "Use generic"
			help
			  Installs a generic /etc/init.d/rcS startup script.
			  See <ptxdist-install>/generic/etc/init.d/rcS

		config ROOTFS_ETC_INITD_RCS_USER
			bool
			prompt "User defined"
			help
			  This installs a user defined rcS startup script.
			  PTXdist uses the file projectroot/etc/init.d/rcS in
			  your local project
	endchoice

########################## inetd for Busybox ############################

# initd startscript is for busysbox only
config ROOTFS_ETC_INITD_INETD
	depends on ROOTFS_ETC_INITD
	depends on BB_CONFIG_INETD
	bool
	prompt "inetd"
	help
	  When enabled, this option installs the generic /etc/init.d/inetd
	  file. This script starts your internet super server (inetd).
	  This is for Busybox' inetd only.

config ROOTFS_ETC_INITD_LOGROTATE
	bool
	prompt "minimal logrotate"
	depends on ROOTFS_ETC_INITD
	help
	  The /etc/init.d/logrotate script is a minimal logrotator.

config ROOTFS_ETC_INITD_MODULES
	depends on ROOTFS_ETC_INITD
	bool
	prompt "modules"
	help
	  When enabled, load all modules in /etc/modules. This requires
	  one type of the tool "grep" (from Busybox or paket procps)

menuconfig ROOTFS_ETC_INITD_NETWORKING
	depends on ROOTFS_ETC_INITD
	bool
	default y
	prompt "networking                "
	select BB_CONFIG_IFUPDOWN if BUSYBOX
	select BB_CONFIG_FEATURE_IFUPDOWN_IP if BUSYBOX
	help
	  When enabled, this option installs the generic
	  /etc/init.d/networking file. This script starts
	  your network interfaces by calling ifup -a

	config ROOTFS_ETC_INITD_NETWORKING_INTERFACES
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_NETWORKING
		string
		prompt "/etc/network/interfaces file"
		default "${PTXDIST_WORKSPACE}/projectroot/etc/network/interfaces"
		help
		  Copy this file to /etc/network/interfaces.

########################## Telnetd from Busysbox ############################

menuconfig ROOTFS_ETC_INITD_TELNETD
	depends on ROOTFS_ETC_INITD
	depends on BB_CONFIG_TELNETD
	depends on BB_CONFIG_FEATURE_TELNETD_STANDALONE
	bool
	default y
	prompt "telnetd                   "
	help
	  The /etc/init.d/telnetd script starts up your busybox based telnetd
	  daemon. Depending on your configuration utelnetd or telnetd
	  is started.

	choice
		prompt "Kind of startup script"
		default ROOTFS_ETC_INITD_TELNETD_DEFAULT
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_TELNETD

		config ROOTFS_ETC_INITD_TELNETD_DEFAULT
			bool
			prompt "Use generic"
			help
			  Installs a generic /etc/init.d/telnetd startup script.
			  See <ptxdist-install>/generic/etc/init.d/telnetd

		config ROOTFS_ETC_INITD_TELNETD_USER
			bool
			prompt "User defined"
			help
			  This uses a user defined telnetd startup script.
			  PTXdist uses file projectroot/etc/init.d/telnetd in
			  your local project
	endchoice

######################## syslogd/klogd from Busysbox ##########################

menuconfig ROOTFS_ETC_INITD_SYSLOGD_KLOGD
	depends on ROOTFS_ETC_INITD
	depends on BB_CONFIG_SYSLOGD
	bool
	prompt "syslogd                   "
	help
	  The /etc/init.d/syslogd script starts up your busybox based
	  syslogd/klogd daemon. Depending on your configuration also klogd will
	  be started.

	choice
		prompt "Kind of startup script"
		default ROOTFS_ETC_INITD_SYSLOGD_KLOGD_DEFAULT
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_SYSLOGD_KLOGD

		config ROOTFS_ETC_INITD_SYSLOGD_KLOGD_DEFAULT
			bool
			prompt "Use generic"
			help
			  Installs a generic /etc/init.d/syslogd startup script.
			  See <ptxdist-install>/generic/etc/init.d/syslogd

		config ROOTFS_ETC_INITD_SYSLOGD_KLOGD_USER
			bool
			prompt "User defined"
			help
			  This uses a user defined syslogd startup script.
			  PTXdist uses file projectroot/etc/init.d/syslogd in
			  your local project
	endchoice

######################## hwclock from Busysbox ##########################

menuconfig ROOTFS_ETC_INITD_HWCLOCK
	depends on ROOTFS_ETC_INITD
	depends on BB_CONFIG_HWCLOCK
	bool
	prompt "timekeeper                "
	help
	  The /etc/init.d/timekeeper script syncs the target with an internal
	  real time clock at startup

	choice
		prompt "Kind of startup script"
		default ROOTFS_ETC_INITD_HWCLOCK_DEFAULT
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_HWCLOCK

		config ROOTFS_ETC_INITD_HWCLOCK_DEFAULT
			bool
			prompt "Use generic"
			help
			  Installs a generic /etc/init.d/timekeeper script.
			  See <ptxdist-install>/generic/etc/init.d/timekeeper

		config ROOTFS_ETC_INITD_HWCLOCK_USER
			bool
			prompt "User defined"
			help
			  This uses a user defined timekeeper script.
			  PTXdist uses file projectroot/etc/init.d/timepeeper in
			  your local project
	endchoice

########################## User startup script ##############################

# FIXME: RSC: needed somewhere? Shold be done by project specific stuff
# if needed.

config ROOTFS_ETC_INITD_STARTUP
	depends on ROOTFS_ETC_INITD
	bool
	prompt "startup"
	help
	  This script runs /home/startup if it exists and is
	  executable

########################## Banner ##########################################

menuconfig ROOTFS_ETC_INITD_BANNER
	depends on ROOTFS_ETC_INITD
	select FIGLET
	bool
	default y
	prompt "banner                    "
	help
	  This Option adds a specific vendor string to
	  the script which displays a nifty ptxdist
	   _
	  | |__   __ _ _ __  _ __   ___ _ __
	  | '_ \ / _` | '_ \| '_ \ / _ \ '__|
	  | |_) | (_| | | | | | | |  __/ |
	  |_.__/ \__,_|_| |_|_| |_|\___|_|
	  page with the hostname and other stuff at
	  startup.

	config ROOTFS_ETC_VENDOR
		depends on ROOTFS_ETC_INITD_BANNER
		string
		prompt "vendorname in /etc/init.d/banner"
		help
		  Type in here your favorite vendorname. It gets displayed
		  whenever your system starts.

########################## crond ##########################################
# this is for busybox' crond only
#
menuconfig ROOTFS_ETC_INITD_CROND
	depends on ROOTFS_ETC_INITD && BB_CONFIG_CROND
	bool
	default y
	prompt "crond                     "
	help
	  The /etc/init.d/crond script lets you control busybox' crond daemon.

	choice
		prompt "Kind of startup scrict"
		depends on ROOTFS_ETC_INITD_CROND
		default ROOTFS_ETC_INITD_CROND_DEFAULT

		config ROOTFS_ETC_INITD_CROND_DEFAULT
			bool
			prompt "Use generic"
			help
			  A file from generic/etc/init.d/crond will be used.

		config ROOTFS_ETC_INITD_CROND_USER
			bool
			prompt "User defined"
			help
			  This uses a user defined crond startup script.
			  PTXdist uses file projectroot/etc/init.d/crond in
			  your local project
	endchoice

# ----------------------------------------------------------------------------

endmenu
