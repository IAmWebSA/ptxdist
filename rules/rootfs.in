##############################################################################
comment "Populate Rootfs"
##############################################################################

config ROOTFS
	bool
	prompt "Create Directories"
	default y
        select BB_CONFIG_FEATURE_SHADOWPASSWDS  if BUSYBOX

config ROOTFS_DEV
	depends on ROOTFS
	bool
	prompt "/dev"
	default y

config ROOTFS_DEV_PTS
	depends on ROOTFS_DEV
	bool
	prompt "/dev/pts"
	default y

config ROOTFS_HOME
	depends on ROOTFS
	bool
	prompt "/home"
	default y

# Media Mountpoints

menuconfig ROOTFS_MEDIA
	depends on ROOTFS
	bool
	prompt "/media"
	default n

config ROOTFS_MEDIA1
        prompt "Mountpoint 1"
        string
	depends on ROOTFS_MEDIA
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA2
        prompt "Mountpoint 2"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA1!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA3
        prompt "Mountpoint 3"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA2!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA4
        prompt "Mountpoint 4"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA3!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA5
        prompt "Mountpoint 5"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA4!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA6
        prompt "Mountpoint 6"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA5!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA7
        prompt "Mountpoint 7"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA6!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA8
        prompt "Mountpoint 8"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA7!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA9
        prompt "Mountpoint 9"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA8!=""
        help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA10
        prompt "Mountpoint 10"
        string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA9!=""
        help
	  This string defines a mountpoint directory in /media

# ok, that's all for /media. 

config ROOTFS_MNT
	depends on ROOTFS
	bool
	prompt "/mnt"
	default y

config ROOTFS_PROC
	depends on ROOTFS
	bool
	prompt "/proc"
	default y 

config ROOTFS_SYS
	depends on ROOTFS
	bool
	prompt "/sys"
	default y

config ROOTFS_TMP
	depends on ROOTFS
	bool
	prompt "/tmp"
	default y

config ROOTFS_VAR
	depends on ROOTFS
	bool
	prompt "/var"
	default y

config ROOTFS_VAR_RUN
	depends on ROOTFS_VAR
	bool
	prompt "/var/run"
	default y

config ROOTFS_VAR_LOG
	depends on ROOTFS_VAR
	bool
	prompt "/var/log"
	default y

##############################################################################
comment "Generic /etc Files"
##############################################################################

config ROOTFS_GENERIC_FSTAB
	depends on ROOTFS
	bool
	prompt "/etc/fstab"
	default y
	help
	  Installs a generic /etc/fstab file.


config ROOTFS_GENERIC_GROUP
	depends on ROOTFS
	bool
	prompt "/etc/group, /etc/gshadow"
	default y
	help
	  Installs a generic /etc/group and /etc/gshadow file.

config ROOTFS_GENERIC_HOSTNAME
	depends on ROOTFS
	bool
	prompt "/etc/hostname"
	default y
	help
	  Installs a generic /etc/hostname file.

config ROOTFS_ETC_HOSTNAME
	depends on ROOTFS_GENERIC_HOSTNAME
	string
	default ptx
	prompt "set hostname in /etc/hostname"

config ROOTFS_GENERIC_HOSTS
	depends on ROOTFS
	bool
	prompt "/etc/hosts"
	default y
	help
	  Installs a generic /etc/hosts file.

config ROOTFS_GENERIC_INITTAB
	depends on ROOTFS
	bool
        select BB_CONFIG_GETTY if BUSYBOX
	prompt "/etc/inittab"
	default y
	help
	  Installs a generic /etc/inittab file.

config ROOTFS_ETC_CONSOLE
	depends on ROOTFS_GENERIC_INITTAB
	string
	default "/dev/tts/0"
	prompt "start getty on this console"

config ROOTFS_ETC_CONSOLE_SPEED
	depends on ROOTFS_GENERIC_INITTAB
	string
	default "115200"
	prompt "getty baudrate"

config ROOTFS_GENERIC_NSSWITCH
	depends on ROOTFS
	bool
	prompt "/etc/nsswitch.conf"
	default y
	help
	  Installs a generic /etc/nsswitch.conf file.

config ROOTFS_GENERIC_PASSWD
	depends on ROOTFS
	bool
	prompt "/etc/passwd"
	default y
	help
	  Installs a generic /etc/passwd file. This file does not offer
	  any security, the root login is without a password. So don't
	  use it in a network environment which is available to the 
	  outside. 

config ROOTFS_GENERIC_PROFILE
	depends on ROOTFS
	bool
	prompt "/etc/profile"
	default y
	help
	  Installs a generic /etc/profile file.

config ROOTFS_ETC_PS1
	depends on ROOTFS_GENERIC_PROFILE
	string
	default "\\u@\\h:\\w"
	prompt "set PS1 in /etc/profile"

config ROOTFS_ETC_PS2
	depends on ROOTFS_GENERIC_PROFILE
	string
	default ""
	prompt "set PS2 in /etc/profile"

config ROOTFS_ETC_PS4
	depends on ROOTFS_GENERIC_PROFILE
	string
	default ""
	prompt "set PS4 in /etc/profile"

config ROOTFS_GENERIC_PROTOCOLS
	depends on ROOTFS
	bool
	prompt "/etc/protocols"
	default y
	help
	  Install a generic /etc/protocols file.

config ROOTFS_GENERIC_RESOLV
	depends on ROOTFS
	bool
	prompt "/etc/resolv.conf"
	default y
	help
	  Install a generic /etc/resolv.conf file.

config ROOTFS_GENERIC_SHADOW
	depends on ROOTFS
	bool
	prompt "/etc/shadow, /etc/shadow-"
	default y
	help
	  Install a generic /etc/shadow and /etc/gshadow file.

config ROOTFS_GENERIC_UDHCPC
	depends on ROOTFS
	depends on BB_CONFIG_UDHCPC
	bool
	default y
	prompt "/etc/udhcpc.script (busybox udhcpc)"
	help 
	  udhcpc (busybox) accepts the -s file or --script=file option. 
	  The /etc/udhcpc.script will be run at dhcp events.

##############################################################################
comment "Start Scripts in /etc/init.d"
##############################################################################

config ROOTFS_ETC_INITD
	depends on ROOTFS
	bool
	prompt "Use generic scripts for /etc/init.d"
	default y
        select BB_CONFIG_RUN_PARTS      if BUSYBOX
	help
	  When enabled, this option copies the files from 
	  $(TOPDIR)/projects/generic/etc/init.d to the target root 
	  filesystem. The files contain useful defaults for most projects, 
	  so if you don't intend to use your completely self-made etc
	  directory you should problably switch this on. 

config ROOTFS_ETC_INITD_RCS
	bool
	prompt "rc file starter (/etc/init.d/rcS)"
	depends on ROOTFS_ETC_INITD
	default y
	help
	  The /etc/init.d/rcS script is started by init in /etc/inittab. 
	  Its main purpose is to run the other init scripts by calling
	  run-parts. 

config ROOTFS_ETC_INITD_NETWORKING
	depends on ROOTFS_ETC_INITD
	bool
	default y
	prompt "generic /etc/init.d/networking"
	select BB_CONFIG_FEATURE_IFUPDOWN_IP if BUSYBOX
	help
	  When enabled, this option installs the generic
	  /etc/init.d/networking file. This script starts
	  your network interfaces by calling ifup -a

config ROOTFS_ETC_INITD_NETWORKING_LINK
	depends on ROOTFS_ETC_INITD_NETWORKING
	string
	prompt "link name in /etc/rcS"
	default "S01_networking"
	help
	  Set a link to with this name in /etc/rc.d which points to 
	  /etc/init.d/networking. 

config ROOTFS_ETC_INITD_NETWORKING_INTERFACES
	depends on ROOTFS_ETC_INITD_NETWORKING
	string
	prompt "/etc/network/interfaces file"
	default "$(PROJECTDIR)/etc/network/interfaces"
	help
	  Copy this file to /etc/network/interfaces. 

########################## Telnetd ##########################################

comment "telnetd startup script needs telnet"
	depends on !UTELNETD

config ROOTFS_ETC_INITD_TELNETD
	depends on ROOTFS_ETC_INITD && UTELNETD
	bool
	default y
	prompt "telnet startup script"
	help
	  The /etc/init.d/telnetd script starts up your telnet
	  demon. Depending on your configuration utelnetd or telnetd
	  is started.

choice
	prompt "Kind of startup scrict"
	default ROOTFS_ETC_INITD_TELNETD_DEFAULT
	depends on ROOTFS_ETC_INITD_TELNETD

	config ROOTFS_ETC_INITD_TELNETD_DEFAULT
		bool
		prompt "Use default telnetd"
		help
		  A file from projects/generic/etc/init.d/telnetd will be used

	config ROOTFS_ETC_INITD_TELNETD_USER
		bool
		prompt "Use your own telnetd script"
		help
		  Select this, then you can enter a path and filename to your
		  own httpd startup script
endchoice

config ROOTFS_ETC_INITD_TELNETD_USER_FILE
	depends on ROOTFS_ETC_INITD_TELNETD_USER
	prompt "Path and name of your own telnetd to be used"
	string
	default ""
	help
	  Enter a path and filename to be used as telnetd script on your target

config ROOTFS_ETC_INITD_TELNETD_LINK
	depends on ROOTFS_ETC_INITD_TELNETD
	string
	prompt "link name in /etc/rcS"
	default "S07_telnetd"
	help
	  Set a link to with this name in /etc/rc.d which points to 
	  /etc/init.d/telnetd. 

########################## Banner ##########################################

config ROOTFS_ETC_INITD_STARTUP
	depends on ROOTFS_ETC_INITD
	bool
	default n
	prompt "user startup script (/home/startup)"
	help
	  This script runs /home/startup if it exists and is
	  executable

########################## Banner ##########################################

config ROOTFS_ETC_INITD_BANNER
	depends on ROOTFS_ETC_INITD
	bool
	default y
	prompt "generic boot banner (/etc/init.d/banner)"
	help
	  This Option adds a specific vendor string to 
	  the script which displays a nifty ptxdist
	   _                                 
	  | |__   __ _ _ __  _ __   ___ _ __ 
	  | '_ \ / _` | '_ \| '_ \ / _ \ '__|
	  | |_) | (_| | | | | | | |  __/ |   
	  |_.__/ \__,_|_| |_|_| |_|\___|_|   
	  page with the hostname and other stuff at 
	  startup. 

config ROOTFS_ETC_INITD_BANNER_LINK
	depends on ROOTFS_ETC_INITD_BANNER
	string
	prompt "link name in /etc/rcS"
	default "S02_banner"
	help
	  Set a link to with this name in /etc/rc.d which points to 
	  /etc/init.d/banner. 

	  
config ROOTFS_ETC_VENDOR
	depends on ROOTFS_ETC_INITD_BANNER
	string
	prompt "vendorname in /etc/init.d/banner"
	help

########################## Apache 2 ##########################################

comment "apache startup script needs apache"
	depends on !APACHE2

config ROOTFS_ETC_INITD_HTTPD
	depends on ROOTFS_ETC_INITD && APACHE2
	bool
	default yes
	prompt "Apache startup script"
	help
	  The /etc/init.d/httpd script lets you control the apache daemon.

choice
	prompt "Kind of startup scrict"
	default ROOTFS_ETC_INITD_HTTPD_DEFAULT
	depends on ROOTFS_ETC_INITD_HTTPD

	config ROOTFS_ETC_INITD_HTTPD_DEFAULT
		bool
		prompt "Use default httpd"
		help
		  A file from projects/generic/etc/init.d/httpd will be used

	config ROOTFS_ETC_INITD_HTTPD_USER
		bool
		prompt "Use your own httpd file"
		help
		  Select this, then you can enter a path and filename to your
		  own httpd startup script
endchoice

config ROOTFS_ETC_INITD_HTTPD_USER_FILE
	depends on ROOTFS_ETC_INITD_HTTPD_USER
	prompt "Path and name of your own httpd to be used"
	string
	default ""
	help
	  Enter a path and filename to be used as httpd script on your target

config ROOTFS_ETC_INITD_HTTPD_LINK
	depends on ROOTFS_ETC_INITD_HTTPD
	string
	prompt "link name in /etc/rc.d"
	default "S08_httpd"
	help
          Set a link into /etc/rc.d which points to /etc/init.d/httpd to
	  start apache while system boot.


