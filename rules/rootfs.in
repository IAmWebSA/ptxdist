menu	"Root Filesystem     "

config ROOTFS
	bool
	prompt "Populate root filesystem"
	default y
        select BB_CONFIG_FEATURE_SHADOWPASSWDS  if BUSYBOX

config ROOTFS_DEV
	depends on ROOTFS
	bool
	prompt "Create /dev"
	default y

config ROOTFS_ETC
	depends on ROOTFS
	bool
	prompt "Use generic template for /etc"
	default y
        select BB_CONFIG_GETTY          if BUSYBOX
        select BB_CONFIG_RUN_PARTS      if BUSYBOX
	help
	  When enabled, this option copies the files from 
	  $(TOPDIR)/projects/generic/etc to the target root filesystem. 
	  The files contain useful defaults for most projects, so
	  if you don't intend to use your completely self-made etc
	  directory you should problably switch this on. 

config ROOTFS_ETC_CONSOLE
	depends on ROOTFS_ETC
	string
	default "/dev/tts/0"
	prompt "start getty on this console"

config ROOTFS_ETC_CONSOLE_SPEED
	depends on ROOTFS_ETC
	string
	default "115200"
	prompt "getty baudrate"

config ROOTFS_ETC_PS1
	depends on ROOTFS_ETC
	string
	default "\\u@\\h:\\w"
	prompt "set PS1 in /etc/profile"

config ROOTFS_ETC_PS2
	depends on ROOTFS_ETC
	string
	default ""
	prompt "set PS2 in /etc/profile"

config ROOTFS_ETC_PS4
	depends on ROOTFS_ETC
	string
	default ""
	prompt "set PS4 in /etc/profile"

config ROOTFS_ETC_HOSTNAME
	depends on ROOTFS_ETC
	string
	default ptx
	prompt "set hostname in /etc/hostname"

config ROOTFS_ETC_VENDOR
	depends on ROOTFS_ETC
	string
	prompt "set vendorname in /etc/init.d/banner"

config ROOTFS_FLOPPY
	depends on ROOTFS
	bool
	prompt "Create /floppy"
	default y

config ROOTFS_HOME
	depends on ROOTFS
	bool
	prompt "Create /home"
	default y

config ROOTFS_MNT
	depends on ROOTFS
	bool
	prompt "Create /mnt"
	default y

config ROOTFS_PROC
	depends on ROOTFS
	bool
	prompt "Create /proc"
	default y 

config ROOTFS_SYS
	depends on ROOTFS
	bool
	prompt "Create /sys"
	default y

config ROOTFS_TMP
	depends on ROOTFS
	bool
	prompt "Create /tmp"
	default y

config ROOTFS_VAR
	depends on ROOTFS
	bool
	prompt "Create /var"
	default y

config VENDORTWEAKS
	string
	prompt "Run vendortweaks Makefile at the end of build"
	help
	  Normally you want to do some project specific stuff at the 
	  end of a target build; this may be copying of vendor files 
	  into the root filesystem or other project specific stuff; 
	  As the things to be done here are indeed project we use
	  a normal makefile here which gives you the possibility to 
	  use the usual dependency mechanism. 

	  Normally vendortweaks files live in $(PROJECTDIR), which 
	  is something like $(TOPDIR)/projects/your-project-name. 
	  For example if you want to add a vendortweaks file for 
	  project foobar, use "$(PROJECTDIR)/foobar.vendortweaks" here. 

comment "Image Creation"

config IMAGE_TGZ
	bool
	default n
	prompt "Generate images/root.tgz"
	help
	  Build a tar.gz archive of the root filesystem, containing the
	  right owner/group and access permissions.

config IMAGE_HD
	bool
	default n
	prompt "Generate images/hd.img"
	help
	  Build a harddisk root image

config IMAGE_HD_CONF
	string
	prompt "Geometry file for hd image"
	depends on IMAGE_HD
	help
	  FIXME

	  Usually your hd geometry file lives in $(PROJECTDIR), so enter
	  something like "$(PROJECTDIR)/your-filename" here. 

config IMAGE_JFFS2
	bool
	default n
	select MTD_XCHAIN_MKJFFS2
	select MTD_XCHAIN
	prompt "Generate images/root.jffs2"
	help
	  Build a jffs2 image of the root filesystem

config IMAGE_JFFS2_BLOCKSIZE
	int
	default -1
	prompt "Erase Block Size"
	depends on IMAGE_JFFS2

config IMAGE_JFFS2_EXTRA_ARGS
	string
	default ""
	prompt "extra arguments passed to mkfs.jffs2"
	depends on IMAGE_JFFS2
	help
	  If needed you can add extra arguments for mkfs.jffs2 here
	  (e.g. --devtable=$(PROJECTDIR)/device_table.txt)

config IMAGE_UIMAGE
	bool
	default n
	prompt "Generate images/uRamdisk"
	select XCHAIN_UMKIMAGE
	select IMAGE_EXT2
	select IMAGE_EXT2_GZIP
	help
	  The file images/uRamdisk can be loaded by the bootloader U-Boot

config IMAGE_UIMAGE_NAME
	string
	default "Application Ramdisk"
	prompt "name of the ramdisk image"
	depends IMAGE_UIMAGE

config IMAGE_UIMAGE_EXTRA_ARGS
	string
	default ""
	prompt "extra arguments passed to umkimage"
	depends on IMAGE_UIMAGE
	help
	  If needed you can add extra arguments for umkimage here
          (e.g. -a 0xaa00000 -e 0xaa00000 )

config IMAGE_EXT2
	bool
	default n
	select HOSTTOOLS_GENEXT2FS
	prompt "Generate images/root.ext2 (initrd)"
	help
	  Build an ext2 image of the root filesystem that can be used as an initrd

config IMAGE_EXT2_SIZE
	int
	default -1
	prompt "Size in blocks"
	depends on IMAGE_EXT2

config IMAGE_EXT2_EXTRA_ARGS
	string
	default ""
	prompt "extra arguments passed to genext2fs"
	depends on IMAGE_EXT2
	help
	  If needed you can add extra arguments for genext2fs here
	  (e.g. -U -r 0 -D=$(PROJECTDIR)/device_table.txt)

config IMAGE_EXT2_GZIP
	bool
	default n
	prompt "Compress the image using gzip"
	depends on IMAGE_EXT2

endmenu
