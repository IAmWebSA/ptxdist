comment "----------------------------------"
comment "Populate Rootfs"
comment "----------------------------------"

config ROOTFS
	bool
	prompt "Create Directories in /"
	default y
	select BB_CONFIG_FEATURE_SHADOWPASSWDS if BUSYBOX
	help
	  FIXME: This item needs to be documented

config ROOTFS_DEV
	depends on ROOTFS
	bool
	prompt "/dev"
	default y
	help
	  FIXME: This item needs to be documented

config ROOTFS_DEV_PTS
	depends on ROOTFS_DEV
	bool
	prompt "/dev/pts"
	default y
	help
	  FIXME: This item needs to be documented

config ROOTFS_HOME
	depends on ROOTFS
	bool
	prompt "/home"
	default y
	help
	  FIXME: This item needs to be documented

# Media Mountpoints

menuconfig ROOTFS_MEDIA
	depends on ROOTFS
	bool
	prompt "/media                    "

config ROOTFS_MEDIA1
	prompt "Mountpoint 1"
	string
	depends on ROOTFS_MEDIA
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA2
	prompt "Mountpoint 2"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA1!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA3
	prompt "Mountpoint 3"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA2!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA4
	prompt "Mountpoint 4"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA3!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA5
	prompt "Mountpoint 5"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA4!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA6
	prompt "Mountpoint 6"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA5!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA7
	prompt "Mountpoint 7"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA6!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA8
	prompt "Mountpoint 8"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA7!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA9
	prompt "Mountpoint 9"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA8!=""
	help
	  This string defines a mountpoint directory in /media

config ROOTFS_MEDIA10
	prompt "Mountpoint 10"
	string
	depends on ROOTFS_MEDIA && ROOTFS_MEDIA9!=""
	help
	  This string defines a mountpoint directory in /media

# ok, that's all for /media. 

config ROOTFS_MNT
	depends on ROOTFS
	bool
	prompt "/mnt"
	default y
	help
	  FIXME: This item needs to be documented

config ROOTFS_PROC
	depends on ROOTFS
	bool
	prompt "/proc"
	default y 
	help
	  Create a /proc directory in the root filesystem.
	  You should say yes here.

config ROOTFS_SYS
	depends on ROOTFS
	bool
	prompt "/sys"
	default y
	help
	  Create a /sys directory in the root filesystem.
	  2.6 kernel users should say yes here.

config ROOTFS_TMP
	depends on ROOTFS
	bool
	prompt "/tmp"
	default y
	help
	  Create a /tmp directory in the root filesystem.
	  You should say yes here.

config ROOTFS_VAR
	depends on ROOTFS
	bool
	prompt "/var"
	default y
	help
	  Create a /var directory in the root filesystem.
	  You should say yes here.

config ROOTFS_VAR_RUN
	depends on ROOTFS_VAR
	bool
	prompt "/var/run"
	default y
	help
	  Create a /var/run directory in the root filesystem.
	  Unless you want to mount a tmpfs on /var you should
	  say yes here.

config ROOTFS_VAR_LOG
	depends on ROOTFS_VAR
	bool
	prompt "/var/log"
	default y
	help
	  Create a /var/log directory in the root filesystem.
	  Unless you want to mount a tmpfs on /var you should
	  say yes here.

config ROOTFS_VAR_LOCK
	depends on ROOTFS_VAR
	bool
	prompt "/var/lock"
	default y
	help
	  Create a /var/lock directory in the root filesystem.
	  Unless you want to mount a tmpfs on /var you should
	  say yes here.

comment "----------------------------------"
comment "Generic Config Files in /etc"
comment "----------------------------------"

config ROOTFS_GENERIC_FSTAB
	depends on ROOTFS
	bool
	prompt "/etc/fstab"
	default y
	help
	  Installs a generic /etc/fstab file.

config ROOTFS_GENERIC_MTAB
	depends on ROOTFS
	bool
	prompt "generic /etc/mtab"
	default y
	help
	  Installs a link to /proc/mounts as /etc/mtab. Some tools
	  like those from the e2fs-tools suite need this file to
	  function properly. However, it is a good idea to keep this
	  file around, since a real /etc/mtab would have to be
	  read-write to be accurate, which is not a good idea in
	  embedded environments with ro-mounted rootfs.

config ROOTFS_GENERIC_GROUP
	depends on ROOTFS
	bool
	prompt "/etc/group, /etc/gshadow"
	default y
	help
	  Installs a generic /etc/group and /etc/gshadow file.

menuconfig ROOTFS_GENERIC_HOSTNAME
	depends on ROOTFS
	bool
	prompt "/etc/hostname               "
	default y
	help
	  Installs a generic /etc/hostname file.

	config ROOTFS_ETC_HOSTNAME
		depends on ROOTFS_GENERIC_HOSTNAME
		string
		default ptx
		prompt "set hostname in /etc/hostname"

config ROOTFS_GENERIC_HOSTS
	depends on ROOTFS
	bool
	prompt "/etc/hosts"
	default y
	help
	  Installs a generic /etc/hosts file.

menuconfig ROOTFS_GENERIC_INITTAB
	depends on ROOTFS
	bool
	select BB_CONFIG_GETTY if BUSYBOX
	prompt "/etc/inittab                "
	default y
	help
	  Installs a generic /etc/inittab file.

	config ROOTFS_ETC_CONSOLE
		depends on ROOTFS_GENERIC_INITTAB
		string
		default "/dev/tts/0"
		prompt "start getty on this console"

	config ROOTFS_ETC_CONSOLE_SPEED
		depends on ROOTFS_GENERIC_INITTAB
		string
		default "115200"
		prompt "getty baudrate"

config ROOTFS_GENERIC_IPKG_CONF
	depends on ROOTFS
	depends on IMAGE_IPKG
	bool
	prompt "/etc/ipkg.conf              "
	help
	  Installs a generic /etc/ipkg.conf file.

config ROOTFS_GENERIC_IPKG_CONF_URL
	depends on ROOTFS_GENERIC_IPKG_CONF
	string
	prompt "IPKG Update Site URL"
	default "http://some/path"
	help
	  This path is put into the /etc/ipkg.conf file and specifies 
	  where to find an IPKG packet feed. 

config ROOTFS_GENERIC_NSSWITCH
	depends on ROOTFS
	bool
	prompt "/etc/nsswitch.conf"
	default y
	help
	  Installs a generic /etc/nsswitch.conf file.

config ROOTFS_GENERIC_PASSWD
	depends on ROOTFS
	bool
	prompt "/etc/passwd"
	default y
	help
	  Installs a generic /etc/passwd file. This file does not offer
	  any security, the root login is without a password. So don't
	  use it in a network environment which is available to the 
	  outside. 

menuconfig ROOTFS_GENERIC_PROFILE
	depends on ROOTFS
	bool
	prompt "/etc/profile                "
	default y
	help
	  Installs a generic /etc/profile file.

	config ROOTFS_ETC_PS1
		depends on ROOTFS_GENERIC_PROFILE
		string
		default "\\u@\\h:\\w"
		prompt "set PS1 in /etc/profile"

	config ROOTFS_ETC_PS2
		depends on ROOTFS_GENERIC_PROFILE
		string
		default ""
		prompt "set PS2 in /etc/profile"

	config ROOTFS_ETC_PS4
		depends on ROOTFS_GENERIC_PROFILE
		string
		default ""
		prompt "set PS4 in /etc/profile"

config ROOTFS_GENERIC_PROTOCOLS
	depends on ROOTFS
	bool
	prompt "/etc/protocols"
	default y
	help
	  Install a generic /etc/protocols file.

config ROOTFS_GENERIC_RESOLV
	depends on ROOTFS
	bool
	prompt "/etc/resolv.conf"
	default y
	help
	  Install a generic /etc/resolv.conf file.

config ROOTFS_GENERIC_SYSLOGNG
	depends on SYSLOGNG
	bool
	prompt "/etc/syslog-ng.conf"
	default y
	help
	  Install a generic /etc/syslog-ng.conf file.

config ROOTFS_GENERIC_INETD
	depends on ROOTFS
	bool
	prompt "/etc/inetd.conf"
	default y
	help
	  Install a generic /etc/inetd.conf file.

config ROOTFS_GENERIC_SHADOW
	depends on ROOTFS
	bool
	prompt "/etc/shadow, /etc/shadow-"
	default y
	help
	  Install a generic /etc/shadow and /etc/gshadow file.

config ROOTFS_GENERIC_UDHCPC
	depends on ROOTFS
	depends on BB_CONFIG_UDHCPC
	bool
	default y
	prompt "/etc/udhcpc.script (busybox udhcpc)"
	help 
	  udhcpc (busybox) accepts the -s file or --script=file option. 
	  The /etc/udhcpc.script will be run at dhcp events.

comment "----------------------------------"
comment "Start Scripts in /etc/init.d"
comment "----------------------------------"

config ROOTFS_ETC_INITD
	depends on ROOTFS
	bool
	prompt "Generic Scripts for /etc/init.d"
	default y
	select BB_CONFIG_RUN_PARTS      if BUSYBOX
	help
	  When enabled, this option copies the files from 
	  ${PTXDIST_TOPDIR}/projects-example/generic/etc/init.d to the target root 
	  filesystem. The files contain useful defaults for most projects, 
	  so if you don't intend to use your completely self-made etc
	  directory you should problably switch this on. 

config ROOTFS_ETC_INITD_RCS
	bool
	prompt "rcS"
	depends on ROOTFS_ETC_INITD
	default y
	help
	  The /etc/init.d/rcS script is started by init in /etc/inittab. 
	  Its main purpose is to run the other init scripts by calling
	  run-parts. 

menuconfig ROOTFS_ETC_INITD_INETD
	depends on ROOTFS_ETC_INITD
	bool
	prompt "inetd                     "
	select INETUTILS_INETD
	help
	  When enabled, this option installs the generic /etc/init.d/inetd
	  file. This script starts your internet super server (inetd).

	config ROOTFS_ETC_INITD_INETD_LINK
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_INETD
		string
		prompt "link name in /etc/rcS"
		default "S11_inetd"
		help
		  Set a link to with this name in /etc/rc.d which points to 
		  /etc/init.d/inetd. 

config ROOTFS_ETC_INITD_LOGROTATE
	bool
	prompt "minimal logrotate"
	depends on ROOTFS_ETC_INITD
	help
	  The /etc/init.d/logrotate script is a minimal logrotator.

menuconfig ROOTFS_ETC_INITD_MODULES
	depends on ROOTFS_ETC_INITD
	bool
	prompt "modules                   "
	help
	  When enabled, load all modules in /etc/modules

	config ROOTFS_ETC_INITD_MODULES_LINK
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_MODULES
		string
		prompt "link name in /etc/rcS"
		default "S01_modules"
		help
		  Set a link to with this name in /etc/rc.d which points to 
		  /etc/init.d/modules. 

menuconfig ROOTFS_ETC_INITD_NETWORKING
	depends on ROOTFS_ETC_INITD
	bool
	default y
	prompt "networking                "
	select BB_CONFIG_IFUPDOWN if BUSYBOX
	select BB_CONFIG_FEATURE_IFUPDOWN_IP if BUSYBOX
	help
	  When enabled, this option installs the generic
	  /etc/init.d/networking file. This script starts
	  your network interfaces by calling ifup -a

	config ROOTFS_ETC_INITD_NETWORKING_LINK
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_NETWORKING
		string
		prompt "link name in /etc/rcS"
		default "S02_networking"
		help
		  Set a link to with this name in /etc/rc.d which points to 
		  /etc/init.d/networking. 

	config ROOTFS_ETC_INITD_NETWORKING_INTERFACES
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_NETWORKING
		string
		prompt "/etc/network/interfaces file"
		default "${PTXDIST_WORKSPACE}/projectroot/etc/network/interfaces"
		help
		  Copy this file to /etc/network/interfaces. 

########################## Syslog-NG #########################################

comment "syslog-ng: select syslog-ng"
	depends on ROOTFS_ETC_INITD && !SYSLOGNG

menuconfig ROOTFS_ETC_INITD_SYSLOGNG
	depends on ROOTFS_ETC_INITD && SYSLOGNG
	bool
	default y
	prompt "syslog-ng                 "
	help
	  The /etc/init.d/syslog-ng script lets you control the syslog-ng daemon.

	config ROOTFS_ETC_INITD_SYSLOGNG_LINK
		depends on ROOTFS_ETC_INITD_SYSLOGNG
		string
		prompt "link name in /etc/rc.d"
		default "S08_syslog-ng"
		help
		  Set a link into /etc/rc.d which points to /etc/init.d/syslog-ng to
		  start the syslog-ng daemon when system boots.

########################## Telnetd ##########################################

comment "telnetd: select telnet"
	depends on ROOTFS_ETC_INITD
	depends on ! (UTELNETD || BB_CONFIG_TELNETD)

menuconfig ROOTFS_ETC_INITD_TELNETD
	depends on ROOTFS_ETC_INITD
	depends on (UTELNETD || BB_CONFIG_TELNETD)
	bool
	default y
	prompt "telnetd                   "
	help
	  The /etc/init.d/telnetd script starts up your telnet
	  demon. Depending on your configuration utelnetd or telnetd
	  is started.

	choice
		prompt "Kind of startup script"
		default ROOTFS_ETC_INITD_TELNETD_DEFAULT
		depends on ROOTFS_ETC_INITD
		depends on ROOTFS_ETC_INITD_TELNETD

		config ROOTFS_ETC_INITD_TELNETD_DEFAULT
			depends on ROOTFS_ETC_INITD_TELNETD
			bool
			prompt "Use default telnetd"
			help
			  A file from projects-example/generic/etc/init.d/telnetd will be used

		config ROOTFS_ETC_INITD_TELNETD_USER
			depends on ROOTFS_ETC_INITD_TELNETD
			bool
			prompt "Use your own telnetd script"
			help
			  Select this, then you can enter a path and filename to your
			  own httpd startup script
	endchoice

	config ROOTFS_ETC_INITD_TELNETD_USER_FILE
		depends on ROOTFS_ETC_INITD_TELNETD
		depends on ROOTFS_ETC_INITD_TELNETD_USER
		prompt "Path and name of your own telnetd to be used"
		string
		default ""
		help
		  Enter a path and filename to be used as telnetd script on your target

	config ROOTFS_ETC_INITD_TELNETD_LINK
		depends on ROOTFS_ETC_INITD_TELNETD
		string
		prompt "link name in /etc/rcS"
		default "S07_telnetd"
		help
		  Set a link to with this name in /etc/rc.d which points to 
		  /etc/init.d/telnetd. 

########################## User startup script ##############################

# FIXME: RSC: needed somewhere? Shold be done by project specific stuff
# if needed. 

config ROOTFS_ETC_INITD_STARTUP
	depends on ROOTFS_ETC_INITD
	bool
	prompt "startup"
	help
	  This script runs /home/startup if it exists and is
	  executable

########################## Banner ##########################################

menuconfig ROOTFS_ETC_INITD_BANNER
	depends on ROOTFS_ETC_INITD
	select FIGLET
	bool
	default y
	prompt "banner                    "
	help
	  This Option adds a specific vendor string to
	  the script which displays a nifty ptxdist
	   _
	  | |__   __ _ _ __  _ __   ___ _ __
	  | '_ \ / _` | '_ \| '_ \ / _ \ '__|
	  | |_) | (_| | | | | | | |  __/ |
	  |_.__/ \__,_|_| |_|_| |_|\___|_|
	  page with the hostname and other stuff at
	  startup.

	config ROOTFS_ETC_INITD_BANNER_LINK
		depends on ROOTFS_ETC_INITD_BANNER
		string
		prompt "link name in /etc/rcS"
		default "S03_banner"
		help
		  Set a link to with this name in /etc/rc.d which points to
		  /etc/init.d/banner.


	config ROOTFS_ETC_VENDOR
		depends on ROOTFS_ETC_INITD_BANNER
		string
		prompt "vendorname in /etc/init.d/banner"
		help
		  Type in here your favorite vendorname. It gets displayed
		  whenever your system starts.

########################## Apache 2 ##########################################

comment "apache: select apache 2"
	depends on ROOTFS_ETC_INITD && !APACHE2

menuconfig ROOTFS_ETC_INITD_HTTPD
	depends on ROOTFS_ETC_INITD && APACHE2
	bool
	default y
	prompt "apache                    "
	help
	  The /etc/init.d/httpd script lets you control the apache daemon.

	choice
		prompt "Kind of startup scrict"
		depends on ROOTFS_ETC_INITD_HTTPD
		default ROOTFS_ETC_INITD_HTTPD_DEFAULT

		config ROOTFS_ETC_INITD_HTTPD_DEFAULT
			bool
			prompt "Use default httpd"
			help
			  A file from projects-example/generic/etc/init.d/httpd will be used.

		config ROOTFS_ETC_INITD_HTTPD_USER
			bool
			prompt "Use your own httpd file"
			help
			  Select this, then you can enter a path and filename to your
			  own httpd startup script.
	endchoice

	config ROOTFS_ETC_INITD_HTTPD_USER_FILE
		depends on ROOTFS_ETC_INITD_HTTPD
		depends on ROOTFS_ETC_INITD_HTTPD_USER
		prompt "Path and name of your own httpd to be used"
		string
		default ""
		help
		  Enter a path and filename to be used as httpd script on your target.

	config ROOTFS_ETC_INITD_HTTPD_LINK
		depends on ROOTFS_ETC_INITD_HTTPD
		string
		prompt "link name in /etc/rc.d"
		default "S08_httpd"
		help
		  Set a link into /etc/rc.d which points to /etc/init.d/httpd to
		  start apache when system boots.

########################## udev support  ##########################################

comment "udev: select udev"
	depends on ROOTFS_ETC_INITD && !UDEV

menuconfig ROOTFS_ETC_INITD_UDEV
	depends on ROOTFS_ETC_INITD && UDEV
	bool
	default y
	prompt "udev                      "
	help
	  The /etc/init.d/udev script lets you control the udevd daemon.

	choice
		prompt "Kind of startup scrict"
		default ROOTFS_ETC_INITD_UDEV_DEFAULT
		depends on ROOTFS_ETC_INITD && ROOTFS_ETC_INITD_UDEV

		config ROOTFS_ETC_INITD_UDEV_DEFAULT
			depends on ROOTFS_ETC_INITD && ROOTFS_ETC_INITD_UDEV
			bool
			prompt "Use default udevd"
			select UDEV_START
			help
			  A file from projects-example/generic/etc/init.d/udev will be used

		config ROOTFS_ETC_INITD_UDEV_USER
			depends on ROOTFS_ETC_INITD && ROOTFS_ETC_INITD_UDEV
			bool
			prompt "Use your own udevd file"
			help
			  Select this, then you can enter a path and filename to your
			  own udev startup script
	endchoice

	config ROOTFS_ETC_INITD_UDEV_USER_FILE
		depends on ROOTFS_ETC_INITD && ROOTFS_ETC_INITD_UDEV
		depends on ROOTFS_ETC_INITD_UDEV_USER
		prompt "Path and name of your own udev to be used"
		string
		default ""
		help
		  Enter a path and filename to be used as udev script on your target

	config ROOTFS_ETC_INITD_UDEV_LINK
		depends on ROOTFS_ETC_INITD && ROOTFS_ETC_INITD_UDEV
		depends on UDEV
		string
		prompt "link name in /etc/rc.d"
		default "S00_udev"
		help
		  Set a link to with this name in /etc/rc.d which points to
		  /etc/init.d/udev.

########################## pureftpd  ##########################################

comment "pureftpd: select pureftpd"
	depends on ROOTFS_ETC_INITD && !PUREFTPD

menuconfig ROOTFS_ETC_INITD_PUREFTPD
	depends on ROOTFS_ETC_INITD && PUREFTPD
	bool
	default y
	prompt "purefptd                  "
	help
	  The /etc/init.d/pure-ftpd script lets you control the pure ftp daemon.

	choice
		prompt "Kind of startup scrict"
		depends on ROOTFS_ETC_INITD_PUREFTPD
		default ROOTFS_ETC_INITD_PUREFTPD_DEFAULT

		config ROOTFS_ETC_INITD_PUREFTPD_DEFAULT
			bool
			prompt "Use default pure-ftpd"
			help
			  A file from projects-example/generic/etc/init.d/pure-ftpd will be used.

		config ROOTFS_ETC_INITD_PUREFTPD_USER
			bool
			prompt "Use your own pure-ftpd file"
			help
			  Select this, then you can enter a path and filename to your
			  own pure-ftpd startup script.
	endchoice

	config ROOTFS_ETC_INITD_PUREFTPD_USER_FILE
		depends on ROOTFS_ETC_INITD_PUREFTPD
		depends on ROOTFS_ETC_INITD_PUREFTPD_USER
		prompt "Path and name of your own pure-ftpd to be used"
		string
		default ""
		help
		  Enter a path and filename to be used as pure-ftpd script on your target.

	config ROOTFS_ETC_INITD_PUREFTPD_LINK
		depends on ROOTFS_ETC_INITD_PUREFTPD
		string
		prompt "link name in /etc/rc.d"
		default "S09_pureftpd"
		help
		  Set a link into /etc/rc.d which points to /etc/init.d/pure-ftpd to
		  start pure ftp daemon when system starts.

########################## thin httpd  ##########################################

comment "thin httpd: select thttpd"
	depends on ROOTFS_ETC_INITD && !THTTPD

menuconfig ROOTFS_ETC_INITD_THTTPD
	depends on ROOTFS_ETC_INITD && THTTPD
	bool
	default y
	prompt "thin httpd (thttpd)       "
	help
	  The /etc/init.d/thttpd script lets you control the thin http daemon.

	choice
		prompt "Kind of startup scrict"
		depends on ROOTFS_ETC_INITD_THTTPD
		default ROOTFS_ETC_INITD_THTTPD_DEFAULT

		config ROOTFS_ETC_INITD_THTTPD_DEFAULT
			bool
			prompt "Use default thttpd script"
			help
			  The file from projects-example/generic/etc/init.d/thttpd will be used.

		config ROOTFS_ETC_INITD_THTTPD_USER
			bool
			prompt "Use your own thttpd script file"
			help
			  Select this, then you can enter a path and filename to your
			  own thttpd startup script.
	endchoice

	config ROOTFS_ETC_INITD_THTTPD_USER_FILE
		depends on ROOTFS_ETC_INITD_THTTPD
		depends on ROOTFS_ETC_INITD_THTTPD_USER
		prompt "Path and name of your own thttpd script to be used"
		string
		default ""
		help
		  Enter a path and filename to be used as thttpd script on your target.

	config ROOTFS_ETC_INITD_THTTPD_LINK
		depends on ROOTFS_ETC_INITD_THTTPD
		string
		prompt "link name in /etc/rc.d"
		default "S10_thttpd"
		help
		  Set a link into /etc/rc.d which points to /etc/init.d/thttpd to
		  start thin http daemon when system starts.

########################## ? ##########################################

