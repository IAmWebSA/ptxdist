menu	"Kernel              "

config KERNEL_CONFIG
	string
	prompt "Name of config in $PTXDIST/config/kernel to be used"
	default "kernel-2.4.18-" if KERNEL_2_4_18
	default "kernel-2.4.19-" if KERNEL_2_4_19
	default "kernel-2.4.20-" if KERNEL_2_4_20
	default "kernel-2.4.21-" if KERNEL_2_4_21
	default "kernel-2.4.22-" if KERNEL_2_4_22
	default "kernel-2.4.23-" if KERNEL_2_4_23

choice 
	prompt "Kernel Version"
		default KERNEL_2_4_23
	
	config KERNEL_2_4_18
		bool
		prompt "2.4.18"
		depends on !ARCH_ARM_NOMMU && !ARCH_ARM

	config KERNEL_2_4_19
		bool
		prompt "2.4.19"
 
	config KERNEL_2_4_20
		bool
		prompt "2.4.20"
		depends on ARCH_ARM_NOMMU || ARCH_X86 || ARCH_PPC || ARCH_SPARC || ARCH_MIPS || ARCH_CRIS || ARCH_PARISC || ARCH_SH

	config KERNEL_2_4_21
		bool
		prompt "2.4.21"

	config KERNEL_2_4_22
		bool
		prompt "2.4.22"
		depends on ARCH_ARM_NOMMU || ARCH_X86 || ARCH_PPC || ARCH_SPARC || ARCH_MIPS || ARCH_CRIS || ARCH_PARISC || ARCH_SH

	config KERNEL_2_4_23
		bool
		prompt "2.4.23"
		depends on ARCH_X86 || ARCH_PPC || ARCH_SPARC || ARCH_MIPS || ARCH_CRIS || ARCH_PARISC || ARCH_SH

	config KERNEL_2_4_25
		bool
		prompt "2.4.25"
		depends on ARCH_X86 || ARCH_ARM

	config KERNEL_2_6_0
		bool
		prompt "2.6.0"
		depends on ARCH_X86 || ARCH_ARM
	
	config KERNEL_2_6_1
		bool
		prompt "2.6.1"
		depends on ARCH_X86 || ARCH_ARM
	
endchoice

config DONT_COMPILE_KERNEL
	bool
	prompt "Don't compile kernel"
	default n

choice
	prompt "Kernel Image"
	default KERNEL_IMAGE_BZ
	depends on !DONT_COMPILE_KERNEL

	config KERNEL_IMAGE_BZ
		bool
		prompt "bzImage"
		depends on ARCH_X86
		
	config KERNEL_IMAGE_Z
		bool
		prompt "zImage"
		depends on ARCH_X86

	config KERNEL_IMAGE_U
		bool
		prompt "uImage"
		depends on ARCH_ARM || ARCH_X86 || ARCH_PPC

	config KERNEL_IMAGE_VMLINUX
		bool
		prompt "vmlinux"
endchoice

config KERNEL_INSTALL
	bool
	prompt "Install kernel into /boot on target"
	default n
	depends on !DONT_COMPILE_KERNEL

# ----------------------------------------------------------------------------
# Generic Patch Stack
# ----------------------------------------------------------------------------

comment ""

config KERNEL_PATCH1_URL
	prompt "Patch 1 URL"
	string
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH1_NAME
	prompt "Patch 1 Name"
	string

config KERNEL_PATCH1_XCHAIN
	bool "Patch 1 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH1_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH1_URL!=""

config KERNEL_PATCH2_URL
	prompt "Patch 2 URL"
	string
	depends on KERNEL_PATCH1_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH2_NAME
	prompt "Patch 2 Name"
	string
	depends on KERNEL_PATCH1_URL!=""

config KERNEL_PATCH2_XCHAIN
	bool "Patch 2 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH2_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH2_URL!=""

config KERNEL_PATCH3_URL
	prompt "Patch 3 URL"
	string
	depends on KERNEL_PATCH2_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH3_NAME
	prompt "Patch 3 Name"
	string
	depends on KERNEL_PATCH2_URL!=""

config KERNEL_PATCH3_XCHAIN
	bool "Patch 3 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH3_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH3_URL!=""

config KERNEL_PATCH4_URL
	prompt "Patch 4 URL"
	string
	depends on KERNEL_PATCH3_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH4_NAME
	prompt "Patch 4 Name"
	string
	depends on KERNEL_PATCH3_URL!=""

config KERNEL_PATCH4_XCHAIN
	bool "Patch 4 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH4_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH4_URL!=""

config KERNEL_PATCH5_URL
	prompt "Patch 5 URL"
	string
	depends on KERNEL_PATCH4_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH5_NAME
	prompt "Patch 5 Name"
	string
	depends on KERNEL_PATCH4_URL!=""

config KERNEL_PATCH5_XCHAIN
	bool "Patch 5 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH5_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH5_URL!=""

config KERNEL_PATCH6_URL
	prompt "Patch 6 URL"
	string
	depends on KERNEL_PATCH5_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH6_NAME
	prompt "Patch 6 Name"
	string
	depends on KERNEL_PATCH6_URL!=""

config KERNEL_PATCH6_XCHAIN
	bool "Patch 6 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH6_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH6_URL!=""

config KERNEL_PATCH7_URL
	prompt "Patch 7 URL"
	string
	depends on KERNEL_PATCH6_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH7_NAME
	prompt "Patch 7 Name"
	string
	depends on KERNEL_PATCH6_URL!=""

config KERNEL_PATCH7_XCHAIN
	bool "Patch 7 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH7_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH7_URL!=""

config KERNEL_PATCH8_URL
	prompt "Patch 8 URL"
	string
	depends on KERNEL_PATCH7_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH8_NAME
	prompt "Patch 8 Name"
	string
	depends on KERNEL_PATCH8_URL!=""

config KERNEL_PATCH8_XCHAIN
	bool "Patch 8 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH8_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH8_URL!=""

config KERNEL_PATCH9_URL
	prompt "Patch 9 URL"
	string
	depends on KERNEL_PATCH8_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH9_NAME
	prompt "Patch 9 Name"
	string
	depends on KERNEL_PATCH8_URL!=""

config KERNEL_PATCH9_XCHAIN
	bool "Patch 9 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH9_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH9_URL!=""

config KERNEL_PATCH10_URL
	prompt "Patch 10 URL"
	string
	depends on KERNEL_PATCH9_URL!=""
	help
	  Enter a URL to a diff/patch file or to a directory containing
	  a patch tree for patcher here. 

config KERNEL_PATCH10_NAME
	prompt "Patch 10 Name"
	string
	depends on KERNEL_PATCH9_URL!=""

config KERNEL_PATCH10_XCHAIN
	bool "Patch 10 is relevant for crosschain recompilation"
	depends on KERNEL_PATCH10_URL!=""
	help
	  The cross toolchain plus glibc normally need the kernel
	  headers. If this patch is relevant for toolchain recompilation
	  activate this option. 

comment ""
	depends on KERNEL_PATCH10_URL!=""

# ----------

comment "Extentions"

comment "RTAI/epoll should be ported to patchstack mechanism, please send patch! :-)"
#source "rules/epoll.in"
source "rules/rtai.in"
	
endmenu
